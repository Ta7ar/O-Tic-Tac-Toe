{"ast":null,"code":"import { __rest, __assign } from 'tslib';\nimport sync from 'framesync';\nimport { number, color, px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n  var onRead = _a.onRead,\n      onRender = _a.onRender,\n      _b = _a.uncachedValues,\n      uncachedValues = _b === void 0 ? new Set() : _b,\n      _c = _a.useCache,\n      useCache = _c === void 0 ? true : _c;\n  return function (_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n\n    var props = __rest(_a, []);\n\n    var state = {};\n    var changedValues = [];\n    var hasChanged = false;\n\n    function setValue(key, value) {\n      if (key.startsWith('--')) {\n        props.hasCSSVariable = true;\n      }\n\n      var currentValue = state[key];\n      state[key] = value;\n      if (state[key] === currentValue) return;\n\n      if (changedValues.indexOf(key) === -1) {\n        changedValues.push(key);\n      }\n\n      if (!hasChanged) {\n        hasChanged = true;\n        sync.render(styler.render);\n      }\n    }\n\n    var styler = {\n      get: function (key, forceRead) {\n        if (forceRead === void 0) {\n          forceRead = false;\n        }\n\n        var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n        return useCached ? state[key] : onRead(key, props);\n      },\n      set: function (values, value) {\n        if (typeof values === 'string') {\n          setValue(values, value);\n        } else {\n          for (var key in values) {\n            setValue(key, values[key]);\n          }\n        }\n\n        return this;\n      },\n      render: function (forceRender) {\n        if (forceRender === void 0) {\n          forceRender = false;\n        }\n\n        if (hasChanged || forceRender === true) {\n          onRender(state, props, changedValues);\n          hasChanged = false;\n          changedValues.length = 0;\n        }\n\n        return this;\n      }\n    };\n    return styler;\n  };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\n\nvar camelToDash = function (str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\n\nvar setDashPrefix = function (key, prefixed) {\n  return dashCache.set(key, camelToDash(prefixed));\n};\n\nvar testPrefix = function (key) {\n  testElement = testElement || document.createElement('div');\n\n  for (var i = 0; i < numPrefixes; i++) {\n    var prefix = prefixes[i];\n    var noPrefix = prefix === '';\n    var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n\n    if (prefixedPropertyName in testElement.style || noPrefix) {\n      if (noPrefix && key === 'clipPath' && dashCache.has(key)) {\n        return;\n      }\n\n      camelCache.set(key, prefixedPropertyName);\n      setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n    }\n  }\n};\n\nvar setServerProperty = function (key) {\n  return setDashPrefix(key, key);\n};\n\nvar prefixer = function (key, asDashCase) {\n  if (asDashCase === void 0) {\n    asDashCase = false;\n  }\n\n  var cache = asDashCase ? dashCache : camelCache;\n\n  if (!cache.has(key)) {\n    isBrowser ? testPrefix(key) : setServerProperty(key);\n  }\n\n  return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n  return axes.reduce(function (axesAcc, axesKey) {\n    axesAcc.push(key + axesKey);\n    return axesAcc;\n  }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n  dict[key] = true;\n  return dict;\n}, {});\n\nfunction isTransformProp(key) {\n  return transformPropDictionary[key] === true;\n}\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nvar int = /*#__PURE__*/__assign( /*#__PURE__*/__assign({}, number), {\n  transform: Math.round\n});\n\nvar valueTypes = {\n  color: color,\n  backgroundColor: color,\n  outlineColor: color,\n  fill: color,\n  stroke: color,\n  borderColor: color,\n  borderTopColor: color,\n  borderRightColor: color,\n  borderBottomColor: color,\n  borderLeftColor: color,\n  borderWidth: px,\n  borderTopWidth: px,\n  borderRightWidth: px,\n  borderBottomWidth: px,\n  borderLeftWidth: px,\n  borderRadius: px,\n  radius: px,\n  borderTopLeftRadius: px,\n  borderTopRightRadius: px,\n  borderBottomRightRadius: px,\n  borderBottomLeftRadius: px,\n  width: px,\n  maxWidth: px,\n  height: px,\n  maxHeight: px,\n  size: px,\n  top: px,\n  right: px,\n  bottom: px,\n  left: px,\n  padding: px,\n  paddingTop: px,\n  paddingRight: px,\n  paddingBottom: px,\n  paddingLeft: px,\n  margin: px,\n  marginTop: px,\n  marginRight: px,\n  marginBottom: px,\n  marginLeft: px,\n  rotate: degrees,\n  rotateX: degrees,\n  rotateY: degrees,\n  rotateZ: degrees,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  scaleZ: scale,\n  skew: degrees,\n  skewX: degrees,\n  skewY: degrees,\n  distance: px,\n  translateX: px,\n  translateY: px,\n  translateZ: px,\n  x: px,\n  y: px,\n  z: px,\n  perspective: px,\n  opacity: alpha,\n  originX: progressPercentage,\n  originY: progressPercentage,\n  originZ: px,\n  zIndex: int,\n  fillOpacity: alpha,\n  strokeOpacity: alpha,\n  numOctaves: int\n};\n\nvar getValueType = function (key) {\n  return valueTypes[key];\n};\n\nvar getValueAsType = function (value, type) {\n  return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n  x: 'translateX',\n  y: 'translateY',\n  z: 'translateZ'\n};\n\nfunction isCustomTemplate(v) {\n  return typeof v === 'function';\n}\n\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone) {\n  if (allowTransformNone === void 0) {\n    allowTransformNone = true;\n  }\n\n  var transformString = '';\n  var transformHasZ = false;\n  transformKeys.sort(sortTransformProps);\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    transformHasZ = key === 'z' ? true : transformHasZ;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += 'translateZ(0)';\n  } else {\n    transformString = transformString.trim();\n  }\n\n  if (isCustomTemplate(state.transform)) {\n    transformString = state.transform(transform, transformIsDefault ? '' : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = 'none';\n  }\n\n  return transformString;\n}\n\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone) {\n  if (enableHardwareAcceleration === void 0) {\n    enableHardwareAcceleration = true;\n  }\n\n  if (styles === void 0) {\n    styles = {};\n  }\n\n  if (transform === void 0) {\n    transform = {};\n  }\n\n  if (transformOrigin === void 0) {\n    transformOrigin = {};\n  }\n\n  if (transformKeys === void 0) {\n    transformKeys = [];\n  }\n\n  if (isDashCase === void 0) {\n    isDashCase = false;\n  }\n\n  if (allowTransformNone === void 0) {\n    allowTransformNone = true;\n  }\n\n  var transformIsDefault = true;\n  var hasTransform = false;\n  var hasTransformOrigin = false;\n\n  for (var key in state) {\n    var value = state[key];\n    var valueType = getValueType(key);\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key);\n\n      if (transformIsDefault) {\n        if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n          transformIsDefault = false;\n        }\n      }\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType;\n      hasTransformOrigin = true;\n    } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n      styles[prefixer(key, isDashCase)] = valueAsType;\n    }\n  }\n\n  if (hasTransform || typeof state.transform === 'function') {\n    styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone);\n  }\n\n  if (hasTransformOrigin) {\n    styles.transformOrigin = (transformOrigin.originX || '50%') + \" \" + (transformOrigin.originY || '50%') + \" \" + (transformOrigin.originZ || 0);\n  }\n\n  return styles;\n}\n\nfunction createStyleBuilder(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.enableHardwareAcceleration,\n      enableHardwareAcceleration = _c === void 0 ? true : _c,\n      _d = _b.isDashCase,\n      isDashCase = _d === void 0 ? true : _d,\n      _e = _b.allowTransformNone,\n      allowTransformNone = _e === void 0 ? true : _e;\n\n  var styles = {};\n  var transform = {};\n  var transformOrigin = {};\n  var transformKeys = [];\n  return function (state) {\n    transformKeys.length = 0;\n    buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone);\n    return styles;\n  };\n}\n\nfunction onRead(key, options) {\n  var element = options.element,\n      preparseOutput = options.preparseOutput;\n  var defaultValueType = getValueType(key);\n\n  if (isTransformProp(key)) {\n    return defaultValueType ? defaultValueType.default || 0 : 0;\n  } else if (scrollKeys.has(key)) {\n    return element[key];\n  } else {\n    var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n    return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n  }\n}\n\nfunction onRender(state, _a, changedValues) {\n  var element = _a.element,\n      buildStyles = _a.buildStyles,\n      hasCSSVariable = _a.hasCSSVariable;\n  Object.assign(element.style, buildStyles(state));\n\n  if (hasCSSVariable) {\n    var numChangedValues = changedValues.length;\n\n    for (var i = 0; i < numChangedValues; i++) {\n      var key = changedValues[i];\n\n      if (key.startsWith('--')) {\n        element.style.setProperty(key, state[key]);\n      }\n    }\n  }\n\n  if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n    element[SCROLL_LEFT] = state[SCROLL_LEFT];\n  }\n\n  if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n    element[SCROLL_TOP] = state[SCROLL_TOP];\n  }\n}\n\nvar cssStyler = /*#__PURE__*/createStyler({\n  onRead: onRead,\n  onRender: onRender,\n  uncachedValues: scrollKeys\n});\n\nfunction createCssStyler(element, _a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n      allowTransformNone = _a.allowTransformNone,\n      props = __rest(_a, [\"enableHardwareAcceleration\", \"allowTransformNone\"]);\n\n  return cssStyler(__assign({\n    element: element,\n    buildStyles: createStyleBuilder({\n      enableHardwareAcceleration: enableHardwareAcceleration,\n      allowTransformNone: allowTransformNone\n    }),\n    preparseOutput: true\n  }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\nvar defaultOrigin = 0.5;\n\nvar svgAttrsTemplate = function () {\n  return {\n    style: {}\n  };\n};\n\nvar progressToPixels = function (progress, length) {\n  return px.transform(progress * length);\n};\n\nvar unmeasured = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0\n};\n\nfunction calcOrigin(origin, offset, size) {\n  return typeof origin === 'string' ? origin : px.transform(offset + size * origin);\n}\n\nfunction calculateSVGTransformOrigin(dimensions, originX, originY) {\n  return calcOrigin(originX, dimensions.x, dimensions.width) + \" \" + calcOrigin(originY, dimensions.y, dimensions.height);\n}\n\nvar svgStyleConfig = {\n  enableHardwareAcceleration: false,\n  isDashCase: false\n};\n\nfunction buildSVGAttrs(_a, dimensions, totalPathLength, cssBuilder, attrs, isDashCase) {\n  if (dimensions === void 0) {\n    dimensions = unmeasured;\n  }\n\n  if (cssBuilder === void 0) {\n    cssBuilder = createStyleBuilder(svgStyleConfig);\n  }\n\n  if (attrs === void 0) {\n    attrs = svgAttrsTemplate();\n  }\n\n  if (isDashCase === void 0) {\n    isDashCase = true;\n  }\n\n  var attrX = _a.attrX,\n      attrY = _a.attrY,\n      originX = _a.originX,\n      originY = _a.originY,\n      pathLength = _a.pathLength,\n      _b = _a.pathSpacing,\n      pathSpacing = _b === void 0 ? 1 : _b,\n      _c = _a.pathOffset,\n      pathOffset = _c === void 0 ? 0 : _c,\n      state = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n\n  var style = cssBuilder(state);\n\n  for (var key in style) {\n    if (key === 'transform') {\n      attrs.style.transform = style[key];\n    } else {\n      var attrKey = isDashCase && !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n      attrs[attrKey] = style[key];\n    }\n  }\n\n  if (originX !== undefined || originY !== undefined || style.transform) {\n    attrs.style.transformOrigin = calculateSVGTransformOrigin(dimensions, originX !== undefined ? originX : defaultOrigin, originY !== undefined ? originY : defaultOrigin);\n  }\n\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY;\n\n  if (totalPathLength !== undefined && pathLength !== undefined) {\n    attrs[isDashCase ? 'stroke-dashoffset' : 'strokeDashoffset'] = progressToPixels(-pathOffset, totalPathLength);\n    attrs[isDashCase ? 'stroke-dasharray' : 'strokeDasharray'] = progressToPixels(pathLength, totalPathLength) + \" \" + progressToPixels(pathSpacing, totalPathLength);\n  }\n\n  return attrs;\n}\n\nfunction createAttrBuilder(dimensions, totalPathLength, isDashCase) {\n  if (isDashCase === void 0) {\n    isDashCase = true;\n  }\n\n  var attrs = svgAttrsTemplate();\n  var cssBuilder = createStyleBuilder(svgStyleConfig);\n  return function (state) {\n    return buildSVGAttrs(state, dimensions, totalPathLength, cssBuilder, attrs, isDashCase);\n  };\n}\n\nvar getDimensions = function (element) {\n  return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\n\nvar getSVGElementDimensions = function (element) {\n  try {\n    return getDimensions(element);\n  } catch (e) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  }\n};\n\nvar isPath = function (element) {\n  return element.tagName === 'path';\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n  onRead: function (key, _a) {\n    var element = _a.element;\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n\n    if (!isTransformProp(key)) {\n      return element.getAttribute(key);\n    } else {\n      var valueType = getValueType(key);\n      return valueType ? valueType.default || 0 : 0;\n    }\n  },\n  onRender: function (state, _a) {\n    var element = _a.element,\n        buildAttrs = _a.buildAttrs;\n    var attrs = buildAttrs(state);\n\n    for (var key in attrs) {\n      if (key === 'style') {\n        Object.assign(element.style, attrs.style);\n      } else {\n        element.setAttribute(key, attrs[key]);\n      }\n    }\n  }\n});\n\nvar svg = function (element) {\n  var dimensions = getSVGElementDimensions(element);\n  var pathLength = isPath(element) && element.getTotalLength ? element.getTotalLength() : undefined;\n  return svgStyler({\n    element: element,\n    buildAttrs: createAttrBuilder(dimensions, pathLength)\n  });\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n  useCache: false,\n  onRead: function (key) {\n    return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n  },\n  onRender: function (_a) {\n    var _b = _a.scrollTop,\n        scrollTop = _b === void 0 ? 0 : _b,\n        _c = _a.scrollLeft,\n        scrollLeft = _c === void 0 ? 0 : _c;\n    return window.scrollTo(scrollLeft, scrollTop);\n  }\n});\nvar cache = /*#__PURE__*/new WeakMap();\n\nvar isHTMLElement = function (node) {\n  return node instanceof HTMLElement || typeof node.click === 'function';\n};\n\nvar isSVGElement = function (node) {\n  return node instanceof SVGElement || 'ownerSVGElement' in node;\n};\n\nvar createDOMStyler = function (node, props) {\n  var styler;\n\n  if (node === window) {\n    styler = viewport(node);\n  } else if (isHTMLElement(node)) {\n    styler = createCssStyler(node, props);\n  } else if (isSVGElement(node)) {\n    styler = svg(node);\n  }\n\n  invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n  cache.set(node, styler);\n  return styler;\n};\n\nvar getStyler = function (node, props) {\n  return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\n\nfunction index(nodeOrSelector, props) {\n  var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n  return getStyler(node, props);\n}\n\nexport default index;\nexport { buildSVGAttrs, buildStyleProperty, createStyler as createStylerFactory, isTransformProp, transformProps };","map":{"version":3,"sources":["C:/Users/Tatar/Documents/Full Stack Projects/O Tic-Tac-Toe/client/node_modules/stylefire/dist/stylefire.es.js"],"names":["__rest","__assign","sync","number","color","px","degrees","scale","alpha","progressPercentage","invariant","createStyler","_a","onRead","onRender","_b","uncachedValues","Set","_c","useCache","props","state","changedValues","hasChanged","setValue","key","value","startsWith","hasCSSVariable","currentValue","indexOf","push","render","styler","get","forceRead","useCached","has","undefined","set","values","forceRender","length","CAMEL_CASE_PATTERN","REPLACE_TEMPLATE","camelToDash","str","replace","toLowerCase","camelCache","Map","dashCache","prefixes","numPrefixes","isBrowser","document","testElement","setDashPrefix","prefixed","testPrefix","createElement","i","prefix","noPrefix","prefixedPropertyName","charAt","toUpperCase","slice","style","setServerProperty","prefixer","asDashCase","cache","axes","order","transformProps","reduce","acc","axesAcc","axesKey","transformPropDictionary","dict","isTransformProp","sortTransformProps","a","b","transformOriginProps","isTransformOriginProp","int","transform","Math","round","valueTypes","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","x","y","z","perspective","opacity","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","getValueType","getValueAsType","type","SCROLL_LEFT","SCROLL_TOP","scrollKeys","blacklist","translateAlias","isCustomTemplate","v","buildTransform","transformKeys","transformIsDefault","enableHardwareAcceleration","allowTransformNone","transformString","transformHasZ","sort","numTransformKeys","trim","buildStyleProperty","styles","transformOrigin","isDashCase","hasTransform","hasTransformOrigin","valueType","valueAsType","default","createStyleBuilder","_d","_e","options","element","preparseOutput","defaultValueType","domValue","window","getComputedStyle","getPropertyValue","test","parse","buildStyles","Object","assign","numChangedValues","setProperty","cssStyler","createCssStyler","camelCaseAttributes","defaultOrigin","svgAttrsTemplate","progressToPixels","progress","unmeasured","calcOrigin","origin","offset","calculateSVGTransformOrigin","dimensions","svgStyleConfig","buildSVGAttrs","totalPathLength","cssBuilder","attrs","attrX","attrY","pathLength","pathSpacing","pathOffset","attrKey","createAttrBuilder","getDimensions","getBBox","getBoundingClientRect","getSVGElementDimensions","e","isPath","tagName","svgStyler","getAttribute","buildAttrs","setAttribute","svg","getTotalLength","viewport","pageYOffset","pageXOffset","scrollTop","scrollLeft","scrollTo","WeakMap","isHTMLElement","node","HTMLElement","click","isSVGElement","SVGElement","createDOMStyler","getStyler","index","nodeOrSelector","querySelector","createStylerFactory"],"mappings":"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","sourcesContent":["import { __rest, __assign } from 'tslib';\nimport sync from 'framesync';\nimport { number, color, px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = __rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                sync.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            if (noPrefix && key === 'clipPath' && dashCache.has(key)) {\n                return;\n            }\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) {\n        isBrowser ? testPrefix(key) : setServerProperty(key);\n    }\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar int = /*#__PURE__*/__assign( /*#__PURE__*/__assign({}, number), { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: int,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone) {\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformIsDefault ? '' : transformString);\n    } else if (allowTransformNone && transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || '50%') + \" \" + (transformOrigin.originY || '50%') + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.enableHardwareAcceleration,\n        enableHardwareAcceleration = _c === void 0 ? true : _c,\n        _d = _b.isDashCase,\n        isDashCase = _d === void 0 ? true : _d,\n        _e = _b.allowTransformNone,\n        allowTransformNone = _e === void 0 ? true : _e;\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone);\n        return styles;\n    };\n}\n\nfunction onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: onRead,\n    onRender: onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        allowTransformNone = _a.allowTransformNone,\n        props = __rest(_a, [\"enableHardwareAcceleration\", \"allowTransformNone\"]);\n    return cssStyler(__assign({ element: element, buildStyles: createStyleBuilder({\n            enableHardwareAcceleration: enableHardwareAcceleration,\n            allowTransformNone: allowTransformNone\n        }), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar defaultOrigin = 0.5;\nvar svgAttrsTemplate = function () {\n    return {\n        style: {}\n    };\n};\nvar progressToPixels = function (progress, length) {\n    return px.transform(progress * length);\n};\nvar unmeasured = { x: 0, y: 0, width: 0, height: 0 };\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === 'string' ? origin : px.transform(offset + size * origin);\n}\nfunction calculateSVGTransformOrigin(dimensions, originX, originY) {\n    return calcOrigin(originX, dimensions.x, dimensions.width) + \" \" + calcOrigin(originY, dimensions.y, dimensions.height);\n}\nvar svgStyleConfig = {\n    enableHardwareAcceleration: false,\n    isDashCase: false\n};\nfunction buildSVGAttrs(_a, dimensions, totalPathLength, cssBuilder, attrs, isDashCase) {\n    if (dimensions === void 0) {\n        dimensions = unmeasured;\n    }\n    if (cssBuilder === void 0) {\n        cssBuilder = createStyleBuilder(svgStyleConfig);\n    }\n    if (attrs === void 0) {\n        attrs = svgAttrsTemplate();\n    }\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrX = _a.attrX,\n        attrY = _a.attrY,\n        originX = _a.originX,\n        originY = _a.originY,\n        pathLength = _a.pathLength,\n        _b = _a.pathSpacing,\n        pathSpacing = _b === void 0 ? 1 : _b,\n        _c = _a.pathOffset,\n        pathOffset = _c === void 0 ? 0 : _c,\n        state = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    var style = cssBuilder(state);\n    for (var key in style) {\n        if (key === 'transform') {\n            attrs.style.transform = style[key];\n        } else {\n            var attrKey = isDashCase && !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n            attrs[attrKey] = style[key];\n        }\n    }\n    if (originX !== undefined || originY !== undefined || style.transform) {\n        attrs.style.transformOrigin = calculateSVGTransformOrigin(dimensions, originX !== undefined ? originX : defaultOrigin, originY !== undefined ? originY : defaultOrigin);\n    }\n    if (attrX !== undefined) attrs.x = attrX;\n    if (attrY !== undefined) attrs.y = attrY;\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        attrs[isDashCase ? 'stroke-dashoffset' : 'strokeDashoffset'] = progressToPixels(-pathOffset, totalPathLength);\n        attrs[isDashCase ? 'stroke-dasharray' : 'strokeDasharray'] = progressToPixels(pathLength, totalPathLength) + \" \" + progressToPixels(pathSpacing, totalPathLength);\n    }\n    return attrs;\n}\nfunction createAttrBuilder(dimensions, totalPathLength, isDashCase) {\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrs = svgAttrsTemplate();\n    var cssBuilder = createStyleBuilder(svgStyleConfig);\n    return function (state) {\n        return buildSVGAttrs(state, dimensions, totalPathLength, cssBuilder, attrs, isDashCase);\n    };\n}\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar isPath = function (element) {\n    return element.tagName === 'path';\n};\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType(key);\n            return valueType ? valueType.default || 0 : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var element = _a.element,\n            buildAttrs = _a.buildAttrs;\n        var attrs = buildAttrs(state);\n        for (var key in attrs) {\n            if (key === 'style') {\n                Object.assign(element.style, attrs.style);\n            } else {\n                element.setAttribute(key, attrs[key]);\n            }\n        }\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var pathLength = isPath(element) && element.getTotalLength ? element.getTotalLength() : undefined;\n    return svgStyler({\n        element: element,\n        buildAttrs: createAttrBuilder(dimensions, pathLength)\n    });\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar isHTMLElement = function (node) {\n    return node instanceof HTMLElement || typeof node.click === 'function';\n};\nvar isSVGElement = function (node) {\n    return node instanceof SVGElement || 'ownerSVGElement' in node;\n};\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node === window) {\n        styler = viewport(node);\n    } else if (isHTMLElement(node)) {\n        styler = createCssStyler(node, props);\n    } else if (isSVGElement(node)) {\n        styler = svg(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { buildSVGAttrs, buildStyleProperty, createStyler as createStylerFactory, isTransformProp, transformProps };\n"]},"metadata":{},"sourceType":"module"}