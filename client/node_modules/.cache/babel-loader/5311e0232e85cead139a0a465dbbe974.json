{"ast":null,"code":"import { __rest, __assign, __extends } from 'tslib';\nimport { pipe, velocityPerSecond, mixComplex, mixColor, mix, clamp, progress, velocityPerFrame, distance, angle, applyOffset } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport { invariant } from 'hey-listen';\n\nvar Observer = /*#__PURE__*/function () {\n  function Observer(_a, observer) {\n    var _this = this;\n\n    var middleware = _a.middleware,\n        onComplete = _a.onComplete;\n    this.isActive = true;\n\n    this.update = function (v) {\n      if (_this.observer.update) _this.updateObserver(v);\n    };\n\n    this.complete = function () {\n      if (_this.observer.complete && _this.isActive) _this.observer.complete();\n      if (_this.onComplete) _this.onComplete();\n      _this.isActive = false;\n    };\n\n    this.error = function (err) {\n      if (_this.observer.error && _this.isActive) _this.observer.error(err);\n      _this.isActive = false;\n    };\n\n    this.observer = observer;\n\n    this.updateObserver = function (v) {\n      return observer.update(v);\n    };\n\n    this.onComplete = onComplete;\n\n    if (observer.update && middleware && middleware.length) {\n      middleware.forEach(function (m) {\n        return _this.updateObserver = m(_this.updateObserver, _this.complete);\n      });\n    }\n  }\n\n  return Observer;\n}();\n\nvar createObserver = function createObserver(observerCandidate, _a, onComplete) {\n  var middleware = _a.middleware;\n\n  if (typeof observerCandidate === 'function') {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, {\n      update: observerCandidate\n    });\n  } else {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, observerCandidate);\n  }\n};\n\nvar Action = /*#__PURE__*/function () {\n  function Action(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n  }\n\n  Action.prototype.create = function (props) {\n    return new Action(props);\n  };\n\n  Action.prototype.start = function (observerCandidate) {\n    if (observerCandidate === void 0) {\n      observerCandidate = {};\n    }\n\n    var isComplete = false;\n    var subscription = {\n      stop: function stop() {\n        return undefined;\n      }\n    };\n\n    var _a = this.props,\n        init = _a.init,\n        observerProps = __rest(_a, [\"init\"]);\n\n    var observer = createObserver(observerCandidate, observerProps, function () {\n      isComplete = true;\n      subscription.stop();\n    });\n    var api = init(observer);\n    subscription = api ? __assign({}, subscription, api) : subscription;\n    if (isComplete) subscription.stop();\n    return subscription;\n  };\n\n  Action.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n\n  Action.prototype.pipe = function () {\n    var funcs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n\n  return Action;\n}();\n\nvar action = function action(init) {\n  return new Action({\n    init: init\n  });\n};\n\nvar Chainable = /*#__PURE__*/function () {\n  function Chainable(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n  }\n\n  Chainable.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n\n  Chainable.prototype.pipe = function () {\n    var funcs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n\n  Chainable.prototype.while = function (predicate) {\n    return this.applyMiddleware(function (update, complete) {\n      return function (v) {\n        return predicate(v) ? update(v) : complete();\n      };\n    });\n  };\n\n  Chainable.prototype.filter = function (predicate) {\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return predicate(v) && update(v);\n      };\n    });\n  };\n\n  return Chainable;\n}();\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n  __extends(BaseMulticast, _super);\n\n  function BaseMulticast() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscribers = [];\n    return _this;\n  }\n\n  BaseMulticast.prototype.complete = function () {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.complete();\n    });\n  };\n\n  BaseMulticast.prototype.error = function (err) {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.error(err);\n    });\n  };\n\n  BaseMulticast.prototype.update = function (v) {\n    for (var i = 0; i < this.subscribers.length; i++) {\n      this.subscribers[i].update(v);\n    }\n  };\n\n  BaseMulticast.prototype.subscribe = function (observerCandidate) {\n    var _this = this;\n\n    var observer = createObserver(observerCandidate, this.props);\n    this.subscribers.push(observer);\n    var subscription = {\n      unsubscribe: function unsubscribe() {\n        var index = _this.subscribers.indexOf(observer);\n\n        if (index !== -1) _this.subscribers.splice(index, 1);\n      }\n    };\n    return subscription;\n  };\n\n  BaseMulticast.prototype.stop = function () {\n    if (this.parent) this.parent.stop();\n  };\n\n  return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n  __extends(Multicast, _super);\n\n  function Multicast() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Multicast.prototype.create = function (props) {\n    return new Multicast(props);\n  };\n\n  return Multicast;\n}(BaseMulticast);\n\nvar multicast = function multicast() {\n  return new Multicast();\n};\n\nvar ValueReaction = /*#__PURE__*/function (_super) {\n  __extends(ValueReaction, _super);\n\n  function ValueReaction(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n\n    _this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n      }\n    };\n\n    _this.prev = _this.current = props.value || 0;\n\n    _this.updateCurrent = function (v) {\n      return _this.current = v;\n    };\n\n    _this.getVelocityOfCurrent = function () {\n      return _this.getSingleVelocity(_this.current, _this.prev);\n    };\n\n    if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n    return _this;\n  }\n\n  ValueReaction.prototype.create = function (props) {\n    return new ValueReaction(props);\n  };\n\n  ValueReaction.prototype.get = function () {\n    return this.current;\n  };\n\n  ValueReaction.prototype.getVelocity = function () {\n    return this.getVelocityOfCurrent();\n  };\n\n  ValueReaction.prototype.update = function (v) {\n    _super.prototype.update.call(this, v);\n\n    this.prev = this.current;\n    this.updateCurrent(v);\n\n    var _a = getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n\n    this.timeDelta = delta;\n    this.lastUpdated = timestamp;\n    sync.postRender(this.scheduleVelocityCheck);\n  };\n\n  ValueReaction.prototype.subscribe = function (observerCandidate) {\n    var sub = _super.prototype.subscribe.call(this, observerCandidate);\n\n    this.subscribers[this.subscribers.length - 1].update(this.current);\n    return sub;\n  };\n\n  ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n    return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n  };\n\n  return ValueReaction;\n}(BaseMulticast);\n\nvar value = function value(_value, initialSubscription) {\n  return new ValueReaction({\n    value: _value,\n    initialSubscription: initialSubscription\n  });\n};\n\nvar createVectorTests = function createVectorTests(typeTests) {\n  var testNames = Object.keys(typeTests);\n\n  var isVectorProp = function isVectorProp(prop, key) {\n    return prop !== undefined && !typeTests[key](prop);\n  };\n\n  var getVectorKeys = function getVectorKeys(props) {\n    return testNames.reduce(function (vectorKeys, key) {\n      if (isVectorProp(props[key], key)) vectorKeys.push(key);\n      return vectorKeys;\n    }, []);\n  };\n\n  var testVectorProps = function testVectorProps(props) {\n    return props && testNames.some(function (key) {\n      return isVectorProp(props[key], key);\n    });\n  };\n\n  return {\n    getVectorKeys: getVectorKeys,\n    testVectorProps: testVectorProps\n  };\n};\n\nvar unitTypes = [px, percent, degrees, vh, vw];\n\nvar findUnitType = function findUnitType(prop) {\n  return unitTypes.find(function (type) {\n    return type.test(prop);\n  });\n};\n\nvar isUnitProp = function isUnitProp(prop) {\n  return Boolean(findUnitType(prop));\n};\n\nvar createAction = function createAction(action, props) {\n  return action(props);\n};\n\nvar createUnitAction = function createUnitAction(action, _a) {\n  var from = _a.from,\n      to = _a.to,\n      props = __rest(_a, [\"from\", \"to\"]);\n\n  var unitType = findUnitType(from) || findUnitType(to);\n  var transform = unitType.transform,\n      parse = unitType.parse;\n  return action(__assign({}, props, {\n    from: typeof from === 'string' ? parse(from) : from,\n    to: typeof to === 'string' ? parse(to) : to\n  })).pipe(transform);\n};\n\nvar createMixerAction = function createMixerAction(mixer) {\n  return function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n\n    return action(__assign({}, props, {\n      from: 0,\n      to: 1\n    })).pipe(mixer(from, to));\n  };\n};\n\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\n\nvar createVectorAction = function createVectorAction(action, typeTests) {\n  var _a = createVectorTests(typeTests),\n      testVectorProps = _a.testVectorProps,\n      getVectorKeys = _a.getVectorKeys;\n\n  var vectorAction = function vectorAction(props) {\n    var isVector = testVectorProps(props);\n    if (!isVector) return action(props);\n    var vectorKeys = getVectorKeys(props);\n    var testKey = vectorKeys[0];\n    var testProp = props[testKey];\n    return getActionCreator(testProp)(action, props, vectorKeys);\n  };\n\n  return vectorAction;\n};\n\nvar getActionCreator = function getActionCreator(prop) {\n  if (typeof prop === 'number') {\n    return createAction;\n  } else if (isUnitProp(prop)) {\n    return createUnitAction;\n  } else if (color.test(prop)) {\n    return createColorAction;\n  } else if (complex.test(prop)) {\n    return createComplexAction;\n  } else {\n    return createAction;\n  }\n};\n\nvar decay = function decay(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0 : _b,\n        _c = props.from,\n        from = _c === void 0 ? 0 : _c,\n        _d = props.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = props.timeConstant,\n        timeConstant = _e === void 0 ? 350 : _e,\n        _f = props.restDelta,\n        restDelta = _f === void 0 ? 0.5 : _f,\n        modifyTarget = props.modifyTarget;\n    var elapsed = 0;\n    var amplitude = power * velocity;\n    var idealTarget = Math.round(from + amplitude);\n    var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n    var process = sync.update(function (_a) {\n      var frameDelta = _a.delta;\n      elapsed += frameDelta;\n      var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n      var isMoving = delta > restDelta || delta < -restDelta;\n      var current = isMoving ? target + delta : target;\n      update(current);\n\n      if (!isMoving) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n  from: number.test,\n  modifyTarget: function modifyTarget(func) {\n    return typeof func === 'function';\n  },\n  velocity: number.test\n});\n\nvar spring = function spring(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0.0 : _b;\n    var _c = props.from,\n        from = _c === void 0 ? 0.0 : _c,\n        _d = props.to,\n        to = _d === void 0 ? 0.0 : _d,\n        _e = props.stiffness,\n        stiffness = _e === void 0 ? 100 : _e,\n        _f = props.damping,\n        damping = _f === void 0 ? 10 : _f,\n        _g = props.mass,\n        mass = _g === void 0 ? 1.0 : _g,\n        _h = props.restSpeed,\n        restSpeed = _h === void 0 ? 0.01 : _h,\n        _j = props.restDelta,\n        restDelta = _j === void 0 ? 0.01 : _j;\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var t = 0;\n    var delta = to - from;\n    var position = from;\n    var prevPosition = position;\n    var process = sync.update(function (_a) {\n      var timeDelta = _a.delta;\n      t += timeDelta;\n      var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n      var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n      prevPosition = position;\n\n      if (dampingRatio < 1) {\n        var envelope = Math.exp(-dampingRatio * angularFreq * t);\n        var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n        position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n      } else {\n        var envelope = Math.exp(-angularFreq * t);\n        position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n      }\n\n      velocity = velocityPerSecond(position - prevPosition, timeDelta);\n      var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n\n      if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n        position = to;\n        update(position);\n        cancelSync.update(process);\n        complete();\n      } else {\n        update(position);\n      }\n    }, true);\n    return {\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n  from: number.test,\n  to: number.test,\n  stiffness: number.test,\n  damping: number.test,\n  mass: number.test,\n  velocity: number.test\n});\n\nvar inertia = function inertia(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 700 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget;\n  return action(function (_a) {\n    var update = _a.update,\n        _complete = _a.complete;\n    var prev = from;\n    var current = from;\n    var activeAnimation;\n    var isSpring = false;\n\n    var isLessThanMin = function isLessThanMin(v) {\n      return min !== undefined && v <= min;\n    };\n\n    var isMoreThanMax = function isMoreThanMax(v) {\n      return max !== undefined && v >= max;\n    };\n\n    var isOutOfBounds = function isOutOfBounds(v) {\n      return isLessThanMin(v) || isMoreThanMax(v);\n    };\n\n    var isTravellingAwayFromBounds = function isTravellingAwayFromBounds(v, currentVelocity) {\n      return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n    };\n\n    var onUpdate = function onUpdate(v) {\n      update(v);\n      prev = current;\n      current = v;\n      velocity = velocityPerSecond(current - prev, getFrameData().delta);\n\n      if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, velocity)) {\n        startSpring({\n          from: v,\n          velocity: velocity\n        });\n      }\n    };\n\n    var startAnimation = function startAnimation(animation, next) {\n      activeAnimation && activeAnimation.stop();\n      activeAnimation = animation.start({\n        update: onUpdate,\n        complete: function complete() {\n          if (next) {\n            next();\n            return;\n          }\n\n          _complete();\n        }\n      });\n    };\n\n    var startSpring = function startSpring(props) {\n      isSpring = true;\n      startAnimation(vectorSpring(__assign({}, props, {\n        to: isLessThanMin(props.from) ? min : max,\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta: restDelta\n      })));\n    };\n\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from: from,\n        velocity: velocity\n      });\n    } else if (velocity !== 0) {\n      var animation = vectorDecay({\n        from: from,\n        velocity: velocity,\n        timeConstant: timeConstant,\n        power: power,\n        restDelta: isOutOfBounds(from) ? 20 : restDelta,\n        modifyTarget: modifyTarget\n      });\n      startAnimation(animation, function () {\n        if (isOutOfBounds(current)) {\n          startSpring({\n            from: current,\n            velocity: velocity\n          });\n        } else {\n          _complete();\n        }\n      });\n    } else {\n      _complete();\n    }\n\n    return {\n      stop: function stop() {\n        return activeAnimation && activeAnimation.stop();\n      }\n    };\n  });\n};\n\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n  from: number.test,\n  velocity: number.test,\n  min: number.test,\n  max: number.test,\n  damping: number.test,\n  stiffness: number.test,\n  modifyTarget: function modifyTarget(func) {\n    return typeof func === 'function';\n  }\n});\n\nvar frame = function frame() {\n  return action(function (_a) {\n    var update = _a.update;\n    var initialTime = 0;\n    var process = sync.update(function (_a) {\n      var timestamp = _a.timestamp;\n      if (!initialTime) initialTime = timestamp;\n      update(timestamp - initialTime);\n    }, true, true);\n    return {\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar scrubber = function scrubber(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      _d = _a.ease,\n      ease = _d === void 0 ? linear : _d,\n      _e = _a.reverseEase,\n      reverseEase = _e === void 0 ? false : _e;\n\n  if (reverseEase) {\n    ease = createReversedEasing(ease);\n  }\n\n  return action(function (_a) {\n    var update = _a.update;\n    return {\n      seek: function seek(progress) {\n        return update(progress);\n      }\n    };\n  }).pipe(ease, function (v) {\n    return mix(from, to, v);\n  });\n};\n\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n  ease: function ease(func) {\n    return typeof func === 'function';\n  },\n  from: number.test,\n  to: number.test\n});\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\n\nvar tween = function tween(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.duration,\n        duration = _b === void 0 ? 300 : _b,\n        _c = props.ease,\n        ease = _c === void 0 ? easeOut : _c,\n        _d = props.flip,\n        flip = _d === void 0 ? 0 : _d,\n        _e = props.loop,\n        loop = _e === void 0 ? 0 : _e,\n        _f = props.yoyo,\n        yoyo = _f === void 0 ? 0 : _f,\n        _g = props.repeatDelay,\n        repeatDelay = _g === void 0 ? 0 : _g;\n    var _h = props.from,\n        from = _h === void 0 ? 0 : _h,\n        _j = props.to,\n        to = _j === void 0 ? 1 : _j,\n        _k = props.elapsed,\n        elapsed = _k === void 0 ? 0 : _k,\n        _l = props.flipCount,\n        flipCount = _l === void 0 ? 0 : _l,\n        _m = props.yoyoCount,\n        yoyoCount = _m === void 0 ? 0 : _m,\n        _o = props.loopCount,\n        loopCount = _o === void 0 ? 0 : _o;\n    var playhead = vectorScrubber({\n      from: from,\n      to: to,\n      ease: ease\n    }).start(update);\n    var currentProgress = 0;\n    var process;\n    var _isActive = false;\n\n    var reverseAnimation = function reverseAnimation(reverseEase) {\n      var _a;\n\n      if (reverseEase === void 0) {\n        reverseEase = false;\n      }\n\n      _a = [to, from], from = _a[0], to = _a[1];\n      playhead = vectorScrubber({\n        from: from,\n        to: to,\n        ease: ease,\n        reverseEase: reverseEase\n      }).start(update);\n    };\n\n    var isTweenComplete = function isTweenComplete() {\n      var isComplete = _isActive && elapsed > duration + repeatDelay;\n      if (!isComplete) return false;\n      if (isComplete && !loop && !flip && !yoyo) return true;\n      var overtime = elapsed - duration;\n      elapsed = overtime - repeatDelay;\n\n      if (loop && loopCount < loop) {\n        loopCount++;\n        return false;\n      } else if (flip && flipCount < flip) {\n        flipCount++;\n        reverseAnimation();\n        return false;\n      } else if (yoyo && yoyoCount < yoyo) {\n        yoyoCount++;\n        reverseAnimation(yoyoCount % 2 !== 0);\n        return false;\n      }\n\n      return true;\n    };\n\n    var updateTween = function updateTween() {\n      currentProgress = clampProgress(progress(0, duration, elapsed));\n      playhead.seek(currentProgress);\n    };\n\n    var startTimer = function startTimer() {\n      _isActive = true;\n      process = sync.update(function (_a) {\n        var delta = _a.delta;\n        elapsed += delta;\n        updateTween();\n\n        if (isTweenComplete()) {\n          cancelSync.update(process);\n          complete && sync.update(complete, false, true);\n        }\n      }, true);\n    };\n\n    var stopTimer = function stopTimer() {\n      _isActive = false;\n      if (process) cancelSync.update(process);\n    };\n\n    startTimer();\n    return {\n      isActive: function isActive() {\n        return _isActive;\n      },\n      getElapsed: function getElapsed() {\n        return clamp(0, duration, elapsed);\n      },\n      getProgress: function getProgress() {\n        return currentProgress;\n      },\n      stop: function stop() {\n        stopTimer();\n      },\n      pause: function pause() {\n        stopTimer();\n        return this;\n      },\n      resume: function resume() {\n        if (!_isActive) startTimer();\n        return this;\n      },\n      seek: function seek(newProgress) {\n        elapsed = mix(0, duration, newProgress);\n        sync.update(updateTween, false, true);\n        return this;\n      },\n      reverse: function reverse() {\n        reverseAnimation();\n        return this;\n      }\n    };\n  });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\n\nvar defaultEasings = function defaultEasings(values, easing) {\n  return values.map(function () {\n    return easing || easeOut;\n  }).splice(0, values.length - 1);\n};\n\nvar defaultTimings = function defaultTimings(values) {\n  var numValues = values.length;\n  return values.map(function (value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n};\n\nvar interpolateScrubbers = function interpolateScrubbers(input, scrubbers, update) {\n  var rangeLength = input.length;\n  var finalInputIndex = rangeLength - 1;\n  var finalScrubberIndex = finalInputIndex - 1;\n  var subs = scrubbers.map(function (scrub) {\n    return scrub.start(update);\n  });\n  return function (v) {\n    if (v <= input[0]) {\n      subs[0].seek(0);\n    }\n\n    if (v >= input[finalInputIndex]) {\n      subs[finalScrubberIndex].seek(1);\n    }\n\n    var i = 1;\n\n    for (; i < rangeLength; i++) {\n      if (input[i] > v || i === finalInputIndex) break;\n    }\n\n    var progressInRange = progress(input[i - 1], input[i], v);\n    subs[i - 1].seek(clampProgress$1(progressInRange));\n  };\n};\n\nvar keyframes = function keyframes(_a) {\n  var easings = _a.easings,\n      _b = _a.ease,\n      ease = _b === void 0 ? linear : _b,\n      times = _a.times,\n      values = _a.values,\n      tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n\n  easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n  times = times || defaultTimings(values);\n  var scrubbers = easings.map(function (easing, i) {\n    return vectorScrubber({\n      from: values[i],\n      to: values[i + 1],\n      ease: easing\n    });\n  });\n  return tween(__assign({}, tweenProps, {\n    ease: ease\n  })).applyMiddleware(function (update) {\n    return interpolateScrubbers(times, scrubbers, update);\n  });\n};\n\nvar physics = function physics(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.acceleration,\n        acceleration = _b === void 0 ? 0 : _b,\n        _c = props.friction,\n        friction = _c === void 0 ? 0 : _c,\n        _d = props.velocity,\n        velocity = _d === void 0 ? 0 : _d,\n        springStrength = props.springStrength,\n        to = props.to;\n    var _e = props.restSpeed,\n        restSpeed = _e === void 0 ? 0.001 : _e,\n        _f = props.from,\n        from = _f === void 0 ? 0 : _f;\n    var current = from;\n    var process = sync.update(function (_a) {\n      var delta = _a.delta;\n      var elapsed = Math.max(delta, 16);\n      if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n      if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n\n      if (springStrength !== undefined && to !== undefined) {\n        var distanceToTarget = to - current;\n        velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n      }\n\n      current += velocityPerFrame(velocity, elapsed);\n      update(current);\n      var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n\n      if (isComplete) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      set: function set(v) {\n        current = v;\n        return this;\n      },\n      setAcceleration: function setAcceleration(v) {\n        acceleration = v;\n        return this;\n      },\n      setFriction: function setFriction(v) {\n        friction = v;\n        return this;\n      },\n      setSpringStrength: function setSpringStrength(v) {\n        springStrength = v;\n        return this;\n      },\n      setSpringTarget: function setSpringTarget(v) {\n        to = v;\n        return this;\n      },\n      setVelocity: function setVelocity(v) {\n        velocity = v;\n        return this;\n      },\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n  acceleration: number.test,\n  friction: number.test,\n  velocity: number.test,\n  from: number.test,\n  to: number.test,\n  springStrength: number.test\n});\n\nvar multi = function multi(_a) {\n  var getCount = _a.getCount,\n      getFirst = _a.getFirst,\n      getOutput = _a.getOutput,\n      mapApi = _a.mapApi,\n      setProp = _a.setProp,\n      startActions = _a.startActions;\n  return function (actions) {\n    return action(function (_a) {\n      var update = _a.update,\n          _complete2 = _a.complete,\n          error = _a.error;\n      var numActions = getCount(actions);\n      var output = getOutput();\n\n      var updateOutput = function updateOutput() {\n        return update(output);\n      };\n\n      var numCompletedActions = 0;\n      var subs = startActions(actions, function (a, name) {\n        var hasCompleted = false;\n        return a.start({\n          complete: function complete() {\n            if (!hasCompleted) {\n              hasCompleted = true;\n              numCompletedActions++;\n              if (numCompletedActions === numActions) sync.update(_complete2);\n            }\n          },\n          error: error,\n          update: function update(v) {\n            setProp(output, name, v);\n            sync.update(updateOutput, false, true);\n          }\n        });\n      });\n      return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      }, {});\n    });\n  };\n};\n\nvar composite = /*#__PURE__*/multi({\n  getOutput: function getOutput() {\n    return {};\n  },\n  getCount: function getCount(subs) {\n    return Object.keys(subs).length;\n  },\n  getFirst: function getFirst(subs) {\n    return subs[Object.keys(subs)[0]];\n  },\n  mapApi: function mapApi(subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return Object.keys(subs).reduce(function (output, propKey) {\n        var _a;\n\n        if (subs[propKey][methodName]) {\n          args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n        }\n\n        return output;\n      }, {});\n    };\n  },\n  setProp: function setProp(output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function startActions(actions, starter) {\n    return Object.keys(actions).reduce(function (subs, key) {\n      subs[key] = starter(actions[key], key);\n      return subs;\n    }, {});\n  }\n});\nvar DEFAULT_DURATION = 300;\n\nvar flattenTimings = function flattenTimings(instructions) {\n  var flatInstructions = [];\n  var lastArg = instructions[instructions.length - 1];\n  var isStaggered = typeof lastArg === 'number';\n  var staggerDelay = isStaggered ? lastArg : 0;\n  var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n  var numSegments = segments.length;\n  var offset = 0;\n  segments.forEach(function (item, i) {\n    flatInstructions.push(item);\n\n    if (i !== numSegments - 1) {\n      var duration = item.duration || DEFAULT_DURATION;\n      offset += staggerDelay;\n      flatInstructions.push(\"-\" + (duration - offset));\n    }\n  });\n  return flatInstructions;\n};\n\nvar flattenArrayInstructions = function flattenArrayInstructions(instructions, instruction) {\n  Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n  return instructions;\n};\n\nvar convertDefToProps = function convertDefToProps(props, def, i) {\n  var duration = props.duration,\n      easings = props.easings,\n      times = props.times,\n      values = props.values;\n  var numValues = values.length;\n  var prevTimeTo = times[numValues - 1];\n  var timeFrom = def.at === 0 ? 0 : def.at / duration;\n  var timeTo = (def.at + def.duration) / duration;\n\n  if (i === 0) {\n    values.push(def.from);\n    times.push(timeFrom);\n  } else {\n    if (prevTimeTo !== timeFrom) {\n      if (def.from !== undefined) {\n        values.push(values[numValues - 1]);\n        times.push(timeFrom);\n        easings.push(linear);\n      }\n\n      var from = def.from !== undefined ? def.from : values[numValues - 1];\n      values.push(from);\n      times.push(timeFrom);\n      easings.push(linear);\n    } else if (def.from !== undefined) {\n      values.push(def.from);\n      times.push(timeFrom);\n      easings.push(linear);\n    }\n  }\n\n  values.push(def.to);\n  times.push(timeTo);\n  easings.push(def.ease || easeInOut);\n  return props;\n};\n\nvar timeline = function timeline(instructions, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      duration = _b.duration,\n      elapsed = _b.elapsed,\n      ease = _b.ease,\n      loop = _b.loop,\n      flip = _b.flip,\n      yoyo = _b.yoyo;\n\n  var playhead = 0;\n  var calculatedDuration = 0;\n  var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n  var animationDefs = [];\n  flatInstructions.forEach(function (instruction) {\n    if (typeof instruction === 'string') {\n      playhead += parseFloat(instruction);\n    } else if (typeof instruction === 'number') {\n      playhead = instruction;\n    } else {\n      var def = __assign({}, instruction, {\n        at: playhead\n      });\n\n      def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n      animationDefs.push(def);\n      playhead += def.duration;\n      calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n    }\n  });\n  var tracks = {};\n  var numDefs = animationDefs.length;\n\n  for (var i = 0; i < numDefs; i++) {\n    var def = animationDefs[i];\n    var track = def.track;\n\n    if (track === undefined) {\n      throw new Error('No track defined');\n    }\n\n    if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n    tracks[track].push(def);\n  }\n\n  var trackKeyframes = {};\n\n  for (var key in tracks) {\n    if (tracks.hasOwnProperty(key)) {\n      var keyframeProps = tracks[key].reduce(convertDefToProps, {\n        duration: calculatedDuration,\n        easings: [],\n        times: [],\n        values: []\n      });\n      trackKeyframes[key] = keyframes(__assign({}, keyframeProps, {\n        duration: duration || calculatedDuration,\n        ease: ease,\n        elapsed: elapsed,\n        loop: loop,\n        yoyo: yoyo,\n        flip: flip\n      }));\n    }\n  }\n\n  return composite(trackKeyframes);\n};\n\nvar listen = function listen(element, events, options) {\n  return action(function (_a) {\n    var update = _a.update;\n    var eventNames = events.split(' ').map(function (eventName) {\n      element.addEventListener(eventName, update, options);\n      return eventName;\n    });\n    return {\n      stop: function stop() {\n        return eventNames.forEach(function (eventName) {\n          return element.removeEventListener(eventName, update, options);\n        });\n      }\n    };\n  });\n};\n\nvar defaultPointerPos = function defaultPointerPos() {\n  return {\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    x: 0,\n    y: 0\n  };\n};\n\nvar eventToPoint = function eventToPoint(e, point) {\n  if (point === void 0) {\n    point = defaultPointerPos();\n  }\n\n  point.clientX = point.x = e.clientX;\n  point.clientY = point.y = e.clientY;\n  point.pageX = e.pageX;\n  point.pageY = e.pageY;\n  return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointsLocation = function updatePointsLocation(_a) {\n    var touches = _a.touches;\n    isTouchDevice = true;\n    var numTouches = touches.length;\n    points.length = 0;\n\n    for (var i = 0; i < numTouches; i++) {\n      var thisTouch = touches[i];\n      points.push(eventToPoint(thisTouch));\n    }\n  };\n\n  listen(document, 'touchstart touchmove', {\n    passive: true,\n    capture: true\n  }).start(updatePointsLocation);\n}\n\nvar multitouch = function multitouch(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.preventDefault,\n      preventDefault = _c === void 0 ? true : _c,\n      _d = _b.scale,\n      scale = _d === void 0 ? 1.0 : _d,\n      _e = _b.rotate,\n      rotate = _e === void 0 ? 0.0 : _e;\n\n  return action(function (_a) {\n    var update = _a.update;\n    var output = {\n      touches: points,\n      scale: scale,\n      rotate: rotate\n    };\n    var initialDistance = 0.0;\n    var initialRotation = 0.0;\n    var isGesture = points.length > 1;\n\n    if (isGesture) {\n      var firstTouch = points[0],\n          secondTouch = points[1];\n      initialDistance = distance(firstTouch, secondTouch);\n      initialRotation = angle(firstTouch, secondTouch);\n    }\n\n    var updatePoint = function updatePoint() {\n      if (isGesture) {\n        var firstTouch = points[0],\n            secondTouch = points[1];\n        var newDistance = distance(firstTouch, secondTouch);\n        var newRotation = angle(firstTouch, secondTouch);\n        output.scale = scale * (newDistance / initialDistance);\n        output.rotate = rotate + (newRotation - initialRotation);\n      }\n\n      update(output);\n    };\n\n    var onMove = function onMove(e) {\n      if (preventDefault || e.touches.length > 1) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'touchmove', {\n      passive: !preventDefault\n    }).start(onMove);\n    if (isTouchDevice) sync.update(updatePoint);\n    return {\n      stop: function stop() {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getIsTouchDevice = function getIsTouchDevice() {\n  return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointLocation = function updatePointLocation(e) {\n    isMouseDevice = true;\n    eventToPoint(e, point);\n  };\n\n  listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\n\nvar mouse = function mouse(_a) {\n  var _b = (_a === void 0 ? {} : _a).preventDefault,\n      preventDefault = _b === void 0 ? true : _b;\n  return action(function (_a) {\n    var update = _a.update;\n\n    var updatePoint = function updatePoint() {\n      return update(point);\n    };\n\n    var onMove = function onMove(e) {\n      if (preventDefault) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'mousemove').start(onMove);\n    if (isMouseDevice) sync.update(updatePoint);\n    return {\n      stop: function stop() {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getFirstTouch = function getFirstTouch(_a) {\n  var firstTouch = _a[0];\n  return firstTouch;\n};\n\nvar pointer = function pointer(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n    var touches = _a.touches;\n    return touches;\n  }, getFirstTouch) : mouse(props);\n};\n\nvar index$1 = function index$1(_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var x = _a.x,\n      y = _a.y,\n      props = __rest(_a, [\"x\", \"y\"]);\n\n  if (x !== undefined || y !== undefined) {\n    var applyXOffset_1 = applyOffset(x || 0);\n    var applyYOffset_1 = applyOffset(y || 0);\n    var delta_1 = {\n      x: 0,\n      y: 0\n    };\n    return pointer(props).pipe(function (point) {\n      delta_1.x = applyXOffset_1(point.x);\n      delta_1.y = applyYOffset_1(point.y);\n      return delta_1;\n    });\n  } else {\n    return pointer(props);\n  }\n};\n\nvar chain = function chain() {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        _complete3 = _a.complete;\n    var i = 0;\n    var current;\n\n    var playCurrent = function playCurrent() {\n      current = actions[i].start({\n        complete: function complete() {\n          i++;\n          i >= actions.length ? _complete3() : playCurrent();\n        },\n        update: update\n      });\n    };\n\n    playCurrent();\n    return {\n      stop: function stop() {\n        return current && current.stop();\n      }\n    };\n  });\n};\n\nvar parallel = /*#__PURE__*/multi({\n  getOutput: function getOutput() {\n    return [];\n  },\n  getCount: function getCount(subs) {\n    return subs.length;\n  },\n  getFirst: function getFirst(subs) {\n    return subs[0];\n  },\n  mapApi: function mapApi(subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subs.map(function (sub, i) {\n        if (sub[methodName]) {\n          return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n        }\n      });\n    };\n  },\n  setProp: function setProp(output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function startActions(actions, starter) {\n    return actions.map(function (action, i) {\n      return starter(action, i);\n    });\n  }\n});\n\nvar parallel$1 = function parallel$1() {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return parallel(actions);\n};\n\nvar crossfade = function crossfade(a, b) {\n  return action(function (observer) {\n    var balance = 0;\n    var fadable = parallel$1(a, b).start(__assign({}, observer, {\n      update: function update(_a) {\n        var va = _a[0],\n            vb = _a[1];\n        observer.update(mix(va, vb, balance));\n      }\n    }));\n    return {\n      setBalance: function setBalance(v) {\n        return balance = v;\n      },\n      stop: function stop() {\n        return fadable.stop();\n      }\n    };\n  });\n};\n\nvar delay = function delay(timeToDelay) {\n  return action(function (_a) {\n    var complete = _a.complete;\n    var timeout = setTimeout(complete, timeToDelay);\n    return {\n      stop: function stop() {\n        return clearTimeout(timeout);\n      }\n    };\n  });\n};\n\nvar merge = function merge() {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (observer) {\n    var subs = actions.map(function (thisAction) {\n      return thisAction.start(observer);\n    });\n    return {\n      stop: function stop() {\n        return subs.forEach(function (sub) {\n          return sub.stop();\n        });\n      }\n    };\n  });\n};\n\nvar schedule = function schedule(scheduler, schedulee) {\n  return action(function (_a) {\n    var _update = _a.update,\n        complete = _a.complete;\n    var latest;\n    var schedulerSub = scheduler.start({\n      update: function update() {\n        return latest !== undefined && _update(latest);\n      },\n      complete: complete\n    });\n    var scheduleeSub = schedulee.start({\n      update: function update(v) {\n        return latest = v;\n      },\n      complete: complete\n    });\n    return {\n      stop: function stop() {\n        schedulerSub.stop();\n        scheduleeSub.stop();\n      }\n    };\n  });\n};\n\nvar stagger = function stagger(actions, interval) {\n  var intervalIsNumber = typeof interval === 'number';\n  var actionsWithDelay = actions.map(function (a, i) {\n    var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n    return chain(delay(timeToDelay), a);\n  });\n  return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar styler = function styler() {\n  return invariant(false, 'styler has been removed from Popmotion in 9.0. Downgrade to 8.x or npm install stylefire');\n};\n\nexport { Action, ValueReaction, action, chain, composite, crossfade, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, styler, timeline, tween, value };","map":{"version":3,"sources":["C:/Users/Tatar/Documents/Full Stack Projects/O Tic-Tac-Toe/client/node_modules/popmotion/dist/popmotion.es.js"],"names":["__rest","__assign","__extends","pipe","velocityPerSecond","mixComplex","mixColor","mix","clamp","progress","velocityPerFrame","distance","angle","applyOffset","sync","getFrameData","cancelSync","color","complex","px","percent","degrees","vh","vw","number","createReversedEasing","linear","easeOut","easeInOut","invariant","Observer","_a","observer","_this","middleware","onComplete","isActive","update","v","updateObserver","complete","error","err","length","forEach","m","createObserver","observerCandidate","Action","props","prototype","create","start","isComplete","subscription","stop","undefined","init","observerProps","api","applyMiddleware","concat","funcs","_i","arguments","pipedUpdate","apply","action","Chainable","while","predicate","filter","BaseMulticast","_super","subscribers","subscriber","i","subscribe","push","unsubscribe","index","indexOf","splice","parent","Multicast","multicast","ValueReaction","call","scheduleVelocityCheck","postRender","velocityCheck","timestamp","lastUpdated","prev","current","value","updateCurrent","getVelocityOfCurrent","getSingleVelocity","initialSubscription","get","getVelocity","delta","timeDelta","sub","parseFloat","createVectorTests","typeTests","testNames","Object","keys","isVectorProp","prop","key","getVectorKeys","reduce","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","test","isUnitProp","Boolean","createAction","createUnitAction","from","to","unitType","transform","parse","createMixerAction","mixer","createColorAction","createComplexAction","createVectorAction","vectorAction","isVector","testKey","testProp","getActionCreator","decay","_b","velocity","_c","_d","power","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","Math","round","target","process","frameDelta","exp","isMoving","vectorDecay","func","spring","stiffness","damping","_g","mass","_h","restSpeed","_j","initialVelocity","t","position","prevPosition","dampingRatio","sqrt","angularFreq","envelope","expoDecay","sin","cos","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold","vectorSpring","inertia","min","max","bounceStiffness","bounceDamping","activeAnimation","isSpring","isLessThanMin","isMoreThanMax","isOutOfBounds","isTravellingAwayFromBounds","currentVelocity","onUpdate","startSpring","startAnimation","animation","next","frame","initialTime","scrubber","ease","reverseEase","seek","vectorScrubber","clampProgress","tween","duration","flip","loop","yoyo","repeatDelay","_k","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","currentProgress","reverseAnimation","isTweenComplete","overtime","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","resume","newProgress","reverse","clampProgress$1","defaultEasings","values","easing","map","defaultTimings","numValues","interpolateScrubbers","input","scrubbers","rangeLength","finalInputIndex","finalScrubberIndex","subs","scrub","progressInRange","keyframes","easings","times","tweenProps","Array","isArray","physics","acceleration","friction","springStrength","pow","distanceToTarget","set","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","output","updateOutput","numCompletedActions","a","name","hasCompleted","methodName","composite","args","propKey","starter","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","slice","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","Error","hasOwnProperty","trackKeyframes","keyframeProps","listen","element","events","options","eventNames","split","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","x","y","eventToPoint","e","point","points","isTouchDevice","document","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","scale","rotate","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","index$1","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","parallel","parallel$1","crossfade","b","balance","fadable","va","vb","setBalance","delay","timeToDelay","timeout","setTimeout","clearTimeout","merge","thisAction","schedule","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","styler","everyFrame"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,QAAjB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,IAAT,EAAeC,iBAAf,EAAkCC,UAAlC,EAA8CC,QAA9C,EAAwDC,GAAxD,EAA6DC,KAA7D,EAAoEC,QAApE,EAA8EC,gBAA9E,EAAgGC,QAAhG,EAA0GC,KAA1G,EAAiHC,WAAjH,QAAoI,oBAApI;AACA,OAAOC,IAAP,IAAeC,YAAf,EAA6BC,UAA7B,QAA+C,WAA/C;AACA,SAASC,KAAT,EAAgBC,OAAhB,EAAyBC,EAAzB,EAA6BC,OAA7B,EAAsCC,OAAtC,EAA+CC,EAA/C,EAAmDC,EAAnD,EAAuDC,MAAvD,QAAqE,mBAArE;AACA,SAASC,oBAAT,EAA+BC,MAA/B,EAAuCC,OAAvC,EAAgDC,SAAhD,QAAiE,mBAAjE;AACA,SAASC,SAAT,QAA0B,YAA1B;;AAEA,IAAIC,QAAQ,GAAG,aAAa,YAAY;AACpC,WAASA,QAAT,CAAkBC,EAAlB,EAAsBC,QAAtB,EAAgC;AAC5B,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,UAAU,GAAGH,EAAE,CAACG,UAApB;AAAA,QACIC,UAAU,GAAGJ,EAAE,CAACI,UADpB;AAEA,SAAKC,QAAL,GAAgB,IAAhB;;AACA,SAAKC,MAAL,GAAc,UAAUC,CAAV,EAAa;AACvB,UAAIL,KAAK,CAACD,QAAN,CAAeK,MAAnB,EAA2BJ,KAAK,CAACM,cAAN,CAAqBD,CAArB;AAC9B,KAFD;;AAGA,SAAKE,QAAL,GAAgB,YAAY;AACxB,UAAIP,KAAK,CAACD,QAAN,CAAeQ,QAAf,IAA2BP,KAAK,CAACG,QAArC,EAA+CH,KAAK,CAACD,QAAN,CAAeQ,QAAf;AAC/C,UAAIP,KAAK,CAACE,UAAV,EAAsBF,KAAK,CAACE,UAAN;AACtBF,MAAAA,KAAK,CAACG,QAAN,GAAiB,KAAjB;AACH,KAJD;;AAKA,SAAKK,KAAL,GAAa,UAAUC,GAAV,EAAe;AACxB,UAAIT,KAAK,CAACD,QAAN,CAAeS,KAAf,IAAwBR,KAAK,CAACG,QAAlC,EAA4CH,KAAK,CAACD,QAAN,CAAeS,KAAf,CAAqBC,GAArB;AAC5CT,MAAAA,KAAK,CAACG,QAAN,GAAiB,KAAjB;AACH,KAHD;;AAIA,SAAKJ,QAAL,GAAgBA,QAAhB;;AACA,SAAKO,cAAL,GAAsB,UAAUD,CAAV,EAAa;AAC/B,aAAON,QAAQ,CAACK,MAAT,CAAgBC,CAAhB,CAAP;AACH,KAFD;;AAGA,SAAKH,UAAL,GAAkBA,UAAlB;;AACA,QAAIH,QAAQ,CAACK,MAAT,IAAmBH,UAAnB,IAAiCA,UAAU,CAACS,MAAhD,EAAwD;AACpDT,MAAAA,UAAU,CAACU,OAAX,CAAmB,UAAUC,CAAV,EAAa;AAC5B,eAAOZ,KAAK,CAACM,cAAN,GAAuBM,CAAC,CAACZ,KAAK,CAACM,cAAP,EAAuBN,KAAK,CAACO,QAA7B,CAA/B;AACH,OAFD;AAGH;AACJ;;AACD,SAAOV,QAAP;AACH,CA9B2B,EAA5B;;AA+BA,IAAIgB,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,iBAAV,EAA6BhB,EAA7B,EAAiCI,UAAjC,EAA6C;AAC9D,MAAID,UAAU,GAAGH,EAAE,CAACG,UAApB;;AACA,MAAI,OAAOa,iBAAP,KAA6B,UAAjC,EAA6C;AACzC,WAAO,IAAIjB,QAAJ,CAAa;AAAEI,MAAAA,UAAU,EAAEA,UAAd;AAA0BC,MAAAA,UAAU,EAAEA;AAAtC,KAAb,EAAiE;AAAEE,MAAAA,MAAM,EAAEU;AAAV,KAAjE,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAIjB,QAAJ,CAAa;AAAEI,MAAAA,UAAU,EAAEA,UAAd;AAA0BC,MAAAA,UAAU,EAAEA;AAAtC,KAAb,EAAiEY,iBAAjE,CAAP;AACH;AACJ,CAPD;;AASA,IAAIC,MAAM,GAAG,aAAa,YAAY;AAClC,WAASA,MAAT,CAAgBC,KAAhB,EAAuB;AACnB,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,MAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAKA,KAAL,GAAaA,KAAb;AACH;;AACDD,EAAAA,MAAM,CAACE,SAAP,CAAiBC,MAAjB,GAA0B,UAAUF,KAAV,EAAiB;AACvC,WAAO,IAAID,MAAJ,CAAWC,KAAX,CAAP;AACH,GAFD;;AAGAD,EAAAA,MAAM,CAACE,SAAP,CAAiBE,KAAjB,GAAyB,UAAUL,iBAAV,EAA6B;AAClD,QAAIA,iBAAiB,KAAK,KAAK,CAA/B,EAAkC;AAC9BA,MAAAA,iBAAiB,GAAG,EAApB;AACH;;AACD,QAAIM,UAAU,GAAG,KAAjB;AACA,QAAIC,YAAY,GAAG;AACfC,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOC,SAAP;AACH;AAHc,KAAnB;;AAKA,QAAIzB,EAAE,GAAG,KAAKkB,KAAd;AAAA,QACIQ,IAAI,GAAG1B,EAAE,CAAC0B,IADd;AAAA,QAEIC,aAAa,GAAG1D,MAAM,CAAC+B,EAAD,EAAK,CAAC,MAAD,CAAL,CAF1B;;AAGA,QAAIC,QAAQ,GAAGc,cAAc,CAACC,iBAAD,EAAoBW,aAApB,EAAmC,YAAY;AACxEL,MAAAA,UAAU,GAAG,IAAb;AACAC,MAAAA,YAAY,CAACC,IAAb;AACH,KAH4B,CAA7B;AAIA,QAAII,GAAG,GAAGF,IAAI,CAACzB,QAAD,CAAd;AACAsB,IAAAA,YAAY,GAAGK,GAAG,GAAG1D,QAAQ,CAAC,EAAD,EAAKqD,YAAL,EAAmBK,GAAnB,CAAX,GAAqCL,YAAvD;AACA,QAAID,UAAJ,EAAgBC,YAAY,CAACC,IAAb;AAChB,WAAOD,YAAP;AACH,GArBD;;AAsBAN,EAAAA,MAAM,CAACE,SAAP,CAAiBU,eAAjB,GAAmC,UAAU1B,UAAV,EAAsB;AACrD,WAAO,KAAKiB,MAAL,CAAYlD,QAAQ,CAAC,EAAD,EAAK,KAAKgD,KAAV,EAAiB;AAAEf,MAAAA,UAAU,EAAE,KAAKe,KAAL,CAAWf,UAAX,GAAwB,CAACA,UAAD,EAAa2B,MAAb,CAAoB,KAAKZ,KAAL,CAAWf,UAA/B,CAAxB,GAAqE,CAACA,UAAD;AAAnF,KAAjB,CAApB,CAAP;AACH,GAFD;;AAGAc,EAAAA,MAAM,CAACE,SAAP,CAAiB/C,IAAjB,GAAwB,YAAY;AAChC,QAAI2D,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,KAAK,CAACC,EAAD,CAAL,GAAYC,SAAS,CAACD,EAAD,CAArB;AACH;;AACD,QAAIE,WAAW,GAAGH,KAAK,CAACnB,MAAN,KAAiB,CAAjB,GAAqBmB,KAAK,CAAC,CAAD,CAA1B,GAAgC3D,IAAI,CAAC+D,KAAL,CAAW,KAAK,CAAhB,EAAmBJ,KAAnB,CAAlD;AACA,WAAO,KAAKF,eAAL,CAAqB,UAAUvB,MAAV,EAAkB;AAC1C,aAAO,UAAUC,CAAV,EAAa;AAChB,eAAOD,MAAM,CAAC4B,WAAW,CAAC3B,CAAD,CAAZ,CAAb;AACH,OAFD;AAGH,KAJM,CAAP;AAKH,GAXD;;AAYA,SAAOU,MAAP;AACH,CAhDyB,EAA1B;;AAiDA,IAAImB,MAAM,GAAG,SAATA,MAAS,CAAUV,IAAV,EAAgB;AACzB,SAAO,IAAIT,MAAJ,CAAW;AAAES,IAAAA,IAAI,EAAEA;AAAR,GAAX,CAAP;AACH,CAFD;;AAIA,IAAIW,SAAS,GAAG,aAAa,YAAY;AACrC,WAASA,SAAT,CAAmBnB,KAAnB,EAA0B;AACtB,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,MAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAKA,KAAL,GAAaA,KAAb;AACH;;AACDmB,EAAAA,SAAS,CAAClB,SAAV,CAAoBU,eAApB,GAAsC,UAAU1B,UAAV,EAAsB;AACxD,WAAO,KAAKiB,MAAL,CAAYlD,QAAQ,CAAC,EAAD,EAAK,KAAKgD,KAAV,EAAiB;AAAEf,MAAAA,UAAU,EAAE,KAAKe,KAAL,CAAWf,UAAX,GAAwB,CAACA,UAAD,EAAa2B,MAAb,CAAoB,KAAKZ,KAAL,CAAWf,UAA/B,CAAxB,GAAqE,CAACA,UAAD;AAAnF,KAAjB,CAApB,CAAP;AACH,GAFD;;AAGAkC,EAAAA,SAAS,CAAClB,SAAV,CAAoB/C,IAApB,GAA2B,YAAY;AACnC,QAAI2D,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,KAAK,CAACC,EAAD,CAAL,GAAYC,SAAS,CAACD,EAAD,CAArB;AACH;;AACD,QAAIE,WAAW,GAAGH,KAAK,CAACnB,MAAN,KAAiB,CAAjB,GAAqBmB,KAAK,CAAC,CAAD,CAA1B,GAAgC3D,IAAI,CAAC+D,KAAL,CAAW,KAAK,CAAhB,EAAmBJ,KAAnB,CAAlD;AACA,WAAO,KAAKF,eAAL,CAAqB,UAAUvB,MAAV,EAAkB;AAC1C,aAAO,UAAUC,CAAV,EAAa;AAChB,eAAOD,MAAM,CAAC4B,WAAW,CAAC3B,CAAD,CAAZ,CAAb;AACH,OAFD;AAGH,KAJM,CAAP;AAKH,GAXD;;AAYA8B,EAAAA,SAAS,CAAClB,SAAV,CAAoBmB,KAApB,GAA4B,UAAUC,SAAV,EAAqB;AAC7C,WAAO,KAAKV,eAAL,CAAqB,UAAUvB,MAAV,EAAkBG,QAAlB,EAA4B;AACpD,aAAO,UAAUF,CAAV,EAAa;AAChB,eAAOgC,SAAS,CAAChC,CAAD,CAAT,GAAeD,MAAM,CAACC,CAAD,CAArB,GAA2BE,QAAQ,EAA1C;AACH,OAFD;AAGH,KAJM,CAAP;AAKH,GAND;;AAOA4B,EAAAA,SAAS,CAAClB,SAAV,CAAoBqB,MAApB,GAA6B,UAAUD,SAAV,EAAqB;AAC9C,WAAO,KAAKV,eAAL,CAAqB,UAAUvB,MAAV,EAAkB;AAC1C,aAAO,UAAUC,CAAV,EAAa;AAChB,eAAOgC,SAAS,CAAChC,CAAD,CAAT,IAAgBD,MAAM,CAACC,CAAD,CAA7B;AACH,OAFD;AAGH,KAJM,CAAP;AAKH,GAND;;AAOA,SAAO8B,SAAP;AACH,CArC4B,EAA7B;;AAuCA,IAAII,aAAa,GAAG,aAAa,UAAUC,MAAV,EAAkB;AAC/CvE,EAAAA,SAAS,CAACsE,aAAD,EAAgBC,MAAhB,CAAT;;AACA,WAASD,aAAT,GAAyB;AACrB,QAAIvC,KAAK,GAAGwC,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACP,KAAP,CAAa,IAAb,EAAmBF,SAAnB,CAAnB,IAAoD,IAAhE;;AACA/B,IAAAA,KAAK,CAACyC,WAAN,GAAoB,EAApB;AACA,WAAOzC,KAAP;AACH;;AACDuC,EAAAA,aAAa,CAACtB,SAAd,CAAwBV,QAAxB,GAAmC,YAAY;AAC3C,SAAKkC,WAAL,CAAiB9B,OAAjB,CAAyB,UAAU+B,UAAV,EAAsB;AAC3C,aAAOA,UAAU,CAACnC,QAAX,EAAP;AACH,KAFD;AAGH,GAJD;;AAKAgC,EAAAA,aAAa,CAACtB,SAAd,CAAwBT,KAAxB,GAAgC,UAAUC,GAAV,EAAe;AAC3C,SAAKgC,WAAL,CAAiB9B,OAAjB,CAAyB,UAAU+B,UAAV,EAAsB;AAC3C,aAAOA,UAAU,CAAClC,KAAX,CAAiBC,GAAjB,CAAP;AACH,KAFD;AAGH,GAJD;;AAKA8B,EAAAA,aAAa,CAACtB,SAAd,CAAwBb,MAAxB,GAAiC,UAAUC,CAAV,EAAa;AAC1C,SAAK,IAAIsC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,WAAL,CAAiB/B,MAArC,EAA6CiC,CAAC,EAA9C,EAAkD;AAC9C,WAAKF,WAAL,CAAiBE,CAAjB,EAAoBvC,MAApB,CAA2BC,CAA3B;AACH;AACJ,GAJD;;AAKAkC,EAAAA,aAAa,CAACtB,SAAd,CAAwB2B,SAAxB,GAAoC,UAAU9B,iBAAV,EAA6B;AAC7D,QAAId,KAAK,GAAG,IAAZ;;AACA,QAAID,QAAQ,GAAGc,cAAc,CAACC,iBAAD,EAAoB,KAAKE,KAAzB,CAA7B;AACA,SAAKyB,WAAL,CAAiBI,IAAjB,CAAsB9C,QAAtB;AACA,QAAIsB,YAAY,GAAG;AACfyB,MAAAA,WAAW,EAAE,uBAAY;AACrB,YAAIC,KAAK,GAAG/C,KAAK,CAACyC,WAAN,CAAkBO,OAAlB,CAA0BjD,QAA1B,CAAZ;;AACA,YAAIgD,KAAK,KAAK,CAAC,CAAf,EAAkB/C,KAAK,CAACyC,WAAN,CAAkBQ,MAAlB,CAAyBF,KAAzB,EAAgC,CAAhC;AACrB;AAJc,KAAnB;AAMA,WAAO1B,YAAP;AACH,GAXD;;AAYAkB,EAAAA,aAAa,CAACtB,SAAd,CAAwBK,IAAxB,GAA+B,YAAY;AACvC,QAAI,KAAK4B,MAAT,EAAiB,KAAKA,MAAL,CAAY5B,IAAZ;AACpB,GAFD;;AAGA,SAAOiB,aAAP;AACH,CAtCgC,CAsC/BJ,SAtC+B,CAAjC;;AAwCA,IAAIgB,SAAS,GAAG,aAAa,UAAUX,MAAV,EAAkB;AAC3CvE,EAAAA,SAAS,CAACkF,SAAD,EAAYX,MAAZ,CAAT;;AACA,WAASW,SAAT,GAAqB;AACjB,WAAOX,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACP,KAAP,CAAa,IAAb,EAAmBF,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDoB,EAAAA,SAAS,CAAClC,SAAV,CAAoBC,MAApB,GAA6B,UAAUF,KAAV,EAAiB;AAC1C,WAAO,IAAImC,SAAJ,CAAcnC,KAAd,CAAP;AACH,GAFD;;AAGA,SAAOmC,SAAP;AACH,CAT4B,CAS3BZ,aAT2B,CAA7B;;AAUA,IAAIa,SAAS,GAAG,SAAZA,SAAY,GAAY;AACxB,SAAO,IAAID,SAAJ,EAAP;AACH,CAFD;;AAIA,IAAIE,aAAa,GAAG,aAAa,UAAUb,MAAV,EAAkB;AAC/CvE,EAAAA,SAAS,CAACoF,aAAD,EAAgBb,MAAhB,CAAT;;AACA,WAASa,aAAT,CAAuBrC,KAAvB,EAA8B;AAC1B,QAAIhB,KAAK,GAAGwC,MAAM,CAACc,IAAP,CAAY,IAAZ,EAAkBtC,KAAlB,KAA4B,IAAxC;;AACAhB,IAAAA,KAAK,CAACuD,qBAAN,GAA8B,YAAY;AACtC,aAAO1E,IAAI,CAAC2E,UAAL,CAAgBxD,KAAK,CAACyD,aAAtB,CAAP;AACH,KAFD;;AAGAzD,IAAAA,KAAK,CAACyD,aAAN,GAAsB,UAAU3D,EAAV,EAAc;AAChC,UAAI4D,SAAS,GAAG5D,EAAE,CAAC4D,SAAnB;;AACA,UAAIA,SAAS,KAAK1D,KAAK,CAAC2D,WAAxB,EAAqC;AACjC3D,QAAAA,KAAK,CAAC4D,IAAN,GAAa5D,KAAK,CAAC6D,OAAnB;AACH;AACJ,KALD;;AAMA7D,IAAAA,KAAK,CAAC4D,IAAN,GAAa5D,KAAK,CAAC6D,OAAN,GAAgB7C,KAAK,CAAC8C,KAAN,IAAe,CAA5C;;AACA9D,IAAAA,KAAK,CAAC+D,aAAN,GAAsB,UAAU1D,CAAV,EAAa;AAC/B,aAAOL,KAAK,CAAC6D,OAAN,GAAgBxD,CAAvB;AACH,KAFD;;AAGAL,IAAAA,KAAK,CAACgE,oBAAN,GAA6B,YAAY;AACrC,aAAOhE,KAAK,CAACiE,iBAAN,CAAwBjE,KAAK,CAAC6D,OAA9B,EAAuC7D,KAAK,CAAC4D,IAA7C,CAAP;AACH,KAFD;;AAGA,QAAI5C,KAAK,CAACkD,mBAAV,EAA+BlE,KAAK,CAAC4C,SAAN,CAAgB5B,KAAK,CAACkD,mBAAtB;AAC/B,WAAOlE,KAAP;AACH;;AACDqD,EAAAA,aAAa,CAACpC,SAAd,CAAwBC,MAAxB,GAAiC,UAAUF,KAAV,EAAiB;AAC9C,WAAO,IAAIqC,aAAJ,CAAkBrC,KAAlB,CAAP;AACH,GAFD;;AAGAqC,EAAAA,aAAa,CAACpC,SAAd,CAAwBkD,GAAxB,GAA8B,YAAY;AACtC,WAAO,KAAKN,OAAZ;AACH,GAFD;;AAGAR,EAAAA,aAAa,CAACpC,SAAd,CAAwBmD,WAAxB,GAAsC,YAAY;AAC9C,WAAO,KAAKJ,oBAAL,EAAP;AACH,GAFD;;AAGAX,EAAAA,aAAa,CAACpC,SAAd,CAAwBb,MAAxB,GAAiC,UAAUC,CAAV,EAAa;AAC1CmC,IAAAA,MAAM,CAACvB,SAAP,CAAiBb,MAAjB,CAAwBkD,IAAxB,CAA6B,IAA7B,EAAmCjD,CAAnC;;AACA,SAAKuD,IAAL,GAAY,KAAKC,OAAjB;AACA,SAAKE,aAAL,CAAmB1D,CAAnB;;AACA,QAAIP,EAAE,GAAGhB,YAAY,EAArB;AAAA,QACIuF,KAAK,GAAGvE,EAAE,CAACuE,KADf;AAAA,QAEIX,SAAS,GAAG5D,EAAE,CAAC4D,SAFnB;;AAGA,SAAKY,SAAL,GAAiBD,KAAjB;AACA,SAAKV,WAAL,GAAmBD,SAAnB;AACA7E,IAAAA,IAAI,CAAC2E,UAAL,CAAgB,KAAKD,qBAArB;AACH,GAVD;;AAWAF,EAAAA,aAAa,CAACpC,SAAd,CAAwB2B,SAAxB,GAAoC,UAAU9B,iBAAV,EAA6B;AAC7D,QAAIyD,GAAG,GAAG/B,MAAM,CAACvB,SAAP,CAAiB2B,SAAjB,CAA2BU,IAA3B,CAAgC,IAAhC,EAAsCxC,iBAAtC,CAAV;;AACA,SAAK2B,WAAL,CAAiB,KAAKA,WAAL,CAAiB/B,MAAjB,GAA0B,CAA3C,EAA8CN,MAA9C,CAAqD,KAAKyD,OAA1D;AACA,WAAOU,GAAP;AACH,GAJD;;AAKAlB,EAAAA,aAAa,CAACpC,SAAd,CAAwBgD,iBAAxB,GAA4C,UAAUJ,OAAV,EAAmBD,IAAnB,EAAyB;AACjE,WAAO,OAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOD,IAAP,KAAgB,QAA/C,GAA0DzF,iBAAiB,CAAC0F,OAAO,GAAGD,IAAX,EAAiB,KAAKU,SAAtB,CAA3E,GAA8GnG,iBAAiB,CAACqG,UAAU,CAACX,OAAD,CAAV,GAAsBW,UAAU,CAACZ,IAAD,CAAjC,EAAyC,KAAKU,SAA9C,CAAjB,IAA6E,CAAlM;AACH,GAFD;;AAGA,SAAOjB,aAAP;AACH,CApDgC,CAoD/Bd,aApD+B,CAAjC;;AAqDA,IAAIuB,KAAK,GAAG,eAAUA,MAAV,EAAiBI,mBAAjB,EAAsC;AAC9C,SAAO,IAAIb,aAAJ,CAAkB;AAAES,IAAAA,KAAK,EAAEA,MAAT;AAAgBI,IAAAA,mBAAmB,EAAEA;AAArC,GAAlB,CAAP;AACH,CAFD;;AAIA,IAAIO,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUC,SAAV,EAAqB;AACzC,MAAIC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYH,SAAZ,CAAhB;;AACA,MAAII,YAAY,GAAG,SAAfA,YAAe,CAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AACpC,WAAOD,IAAI,KAAKxD,SAAT,IAAsB,CAACmD,SAAS,CAACM,GAAD,CAAT,CAAeD,IAAf,CAA9B;AACH,GAFD;;AAGA,MAAIE,aAAa,GAAG,SAAhBA,aAAgB,CAAUjE,KAAV,EAAiB;AACjC,WAAO2D,SAAS,CAACO,MAAV,CAAiB,UAAUC,UAAV,EAAsBH,GAAtB,EAA2B;AAC/C,UAAIF,YAAY,CAAC9D,KAAK,CAACgE,GAAD,CAAN,EAAaA,GAAb,CAAhB,EAAmCG,UAAU,CAACtC,IAAX,CAAgBmC,GAAhB;AACnC,aAAOG,UAAP;AACH,KAHM,EAGJ,EAHI,CAAP;AAIH,GALD;;AAMA,MAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAAUpE,KAAV,EAAiB;AACnC,WAAOA,KAAK,IAAI2D,SAAS,CAACU,IAAV,CAAe,UAAUL,GAAV,EAAe;AAC1C,aAAOF,YAAY,CAAC9D,KAAK,CAACgE,GAAD,CAAN,EAAaA,GAAb,CAAnB;AACH,KAFe,CAAhB;AAGH,GAJD;;AAKA,SAAO;AAAEC,IAAAA,aAAa,EAAEA,aAAjB;AAAgCG,IAAAA,eAAe,EAAEA;AAAjD,GAAP;AACH,CAjBD;;AAkBA,IAAIE,SAAS,GAAG,CAACpG,EAAD,EAAKC,OAAL,EAAcC,OAAd,EAAuBC,EAAvB,EAA2BC,EAA3B,CAAhB;;AACA,IAAIiG,YAAY,GAAG,SAAfA,YAAe,CAAUR,IAAV,EAAgB;AAC/B,SAAOO,SAAS,CAACE,IAAV,CAAe,UAAUC,IAAV,EAAgB;AAClC,WAAOA,IAAI,CAACC,IAAL,CAAUX,IAAV,CAAP;AACH,GAFM,CAAP;AAGH,CAJD;;AAKA,IAAIY,UAAU,GAAG,SAAbA,UAAa,CAAUZ,IAAV,EAAgB;AAC7B,SAAOa,OAAO,CAACL,YAAY,CAACR,IAAD,CAAb,CAAd;AACH,CAFD;;AAGA,IAAIc,YAAY,GAAG,SAAfA,YAAe,CAAU3D,MAAV,EAAkBlB,KAAlB,EAAyB;AACxC,SAAOkB,MAAM,CAAClB,KAAD,CAAb;AACH,CAFD;;AAGA,IAAI8E,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAU5D,MAAV,EAAkBpC,EAAlB,EAAsB;AACzC,MAAIiG,IAAI,GAAGjG,EAAE,CAACiG,IAAd;AAAA,MACIC,EAAE,GAAGlG,EAAE,CAACkG,EADZ;AAAA,MAEIhF,KAAK,GAAGjD,MAAM,CAAC+B,EAAD,EAAK,CAAC,MAAD,EAAS,IAAT,CAAL,CAFlB;;AAGA,MAAImG,QAAQ,GAAGV,YAAY,CAACQ,IAAD,CAAZ,IAAsBR,YAAY,CAACS,EAAD,CAAjD;AACA,MAAIE,SAAS,GAAGD,QAAQ,CAACC,SAAzB;AAAA,MACIC,KAAK,GAAGF,QAAQ,CAACE,KADrB;AAEA,SAAOjE,MAAM,CAAClE,QAAQ,CAAC,EAAD,EAAKgD,KAAL,EAAY;AAAE+E,IAAAA,IAAI,EAAE,OAAOA,IAAP,KAAgB,QAAhB,GAA2BI,KAAK,CAACJ,IAAD,CAAhC,GAAyCA,IAAjD;AAAuDC,IAAAA,EAAE,EAAE,OAAOA,EAAP,KAAc,QAAd,GAAyBG,KAAK,CAACH,EAAD,CAA9B,GAAqCA;AAAhG,GAAZ,CAAT,CAAN,CAAkI9H,IAAlI,CAAuIgI,SAAvI,CAAP;AACH,CARD;;AASA,IAAIE,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUC,KAAV,EAAiB;AACrC,SAAO,UAAUnE,MAAV,EAAkBpC,EAAlB,EAAsB;AACzB,QAAIiG,IAAI,GAAGjG,EAAE,CAACiG,IAAd;AAAA,QACIC,EAAE,GAAGlG,EAAE,CAACkG,EADZ;AAAA,QAEIhF,KAAK,GAAGjD,MAAM,CAAC+B,EAAD,EAAK,CAAC,MAAD,EAAS,IAAT,CAAL,CAFlB;;AAGA,WAAOoC,MAAM,CAAClE,QAAQ,CAAC,EAAD,EAAKgD,KAAL,EAAY;AAAE+E,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,EAAE,EAAE;AAAf,KAAZ,CAAT,CAAN,CAAgD9H,IAAhD,CAAqDmI,KAAK,CAACN,IAAD,EAAOC,EAAP,CAA1D,CAAP;AACH,GALD;AAMH,CAPD;;AAQA,IAAIM,iBAAiB,GAAG,aAAaF,iBAAiB,CAAC/H,QAAD,CAAtD;AACA,IAAIkI,mBAAmB,GAAG,aAAaH,iBAAiB,CAAChI,UAAD,CAAxD;;AACA,IAAIoI,kBAAkB,GAAG,SAArBA,kBAAqB,CAAUtE,MAAV,EAAkBwC,SAAlB,EAA6B;AAClD,MAAI5E,EAAE,GAAG2E,iBAAiB,CAACC,SAAD,CAA1B;AAAA,MACIU,eAAe,GAAGtF,EAAE,CAACsF,eADzB;AAAA,MAEIH,aAAa,GAAGnF,EAAE,CAACmF,aAFvB;;AAGA,MAAIwB,YAAY,GAAG,SAAfA,YAAe,CAAUzF,KAAV,EAAiB;AAChC,QAAI0F,QAAQ,GAAGtB,eAAe,CAACpE,KAAD,CAA9B;AACA,QAAI,CAAC0F,QAAL,EAAe,OAAOxE,MAAM,CAAClB,KAAD,CAAb;AACf,QAAImE,UAAU,GAAGF,aAAa,CAACjE,KAAD,CAA9B;AACA,QAAI2F,OAAO,GAAGxB,UAAU,CAAC,CAAD,CAAxB;AACA,QAAIyB,QAAQ,GAAG5F,KAAK,CAAC2F,OAAD,CAApB;AACA,WAAOE,gBAAgB,CAACD,QAAD,CAAhB,CAA2B1E,MAA3B,EAAmClB,KAAnC,EAA0CmE,UAA1C,CAAP;AACH,GAPD;;AAQA,SAAOsB,YAAP;AACH,CAbD;;AAcA,IAAII,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAU9B,IAAV,EAAgB;AACnC,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC1B,WAAOc,YAAP;AACH,GAFD,MAEO,IAAIF,UAAU,CAACZ,IAAD,CAAd,EAAsB;AACzB,WAAOe,gBAAP;AACH,GAFM,MAEA,IAAI9G,KAAK,CAAC0G,IAAN,CAAWX,IAAX,CAAJ,EAAsB;AACzB,WAAOuB,iBAAP;AACH,GAFM,MAEA,IAAIrH,OAAO,CAACyG,IAAR,CAAaX,IAAb,CAAJ,EAAwB;AAC3B,WAAOwB,mBAAP;AACH,GAFM,MAEA;AACH,WAAOV,YAAP;AACH;AACJ,CAZD;;AAcA,IAAIiB,KAAK,GAAG,SAARA,KAAQ,CAAU9F,KAAV,EAAiB;AACzB,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAOkB,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIS,QAAQ,GAAGT,EAAE,CAACS,QAAlB;AAAA,QACIH,MAAM,GAAGN,EAAE,CAACM,MADhB;AAEA,QAAI2G,EAAE,GAAG/F,KAAK,CAACgG,QAAf;AAAA,QACIA,QAAQ,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EADnC;AAAA,QAEIE,EAAE,GAAGjG,KAAK,CAAC+E,IAFf;AAAA,QAGIA,IAAI,GAAGkB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAH/B;AAAA,QAIIC,EAAE,GAAGlG,KAAK,CAACmG,KAJf;AAAA,QAKIA,KAAK,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EALlC;AAAA,QAMIE,EAAE,GAAGpG,KAAK,CAACqG,YANf;AAAA,QAOIA,YAAY,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAPzC;AAAA,QAQIE,EAAE,GAAGtG,KAAK,CAACuG,SARf;AAAA,QASIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EATtC;AAAA,QAUIE,YAAY,GAAGxG,KAAK,CAACwG,YAVzB;AAWA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,SAAS,GAAGP,KAAK,GAAGH,QAAxB;AACA,QAAIW,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAW9B,IAAI,GAAG2B,SAAlB,CAAlB;AACA,QAAII,MAAM,GAAG,OAAON,YAAP,KAAwB,WAAxB,GAAsCG,WAAtC,GAAoDH,YAAY,CAACG,WAAD,CAA7E;AACA,QAAII,OAAO,GAAGlJ,IAAI,CAACuB,MAAL,CAAY,UAAUN,EAAV,EAAc;AACpC,UAAIkI,UAAU,GAAGlI,EAAE,CAACuE,KAApB;AACAoD,MAAAA,OAAO,IAAIO,UAAX;AACA,UAAI3D,KAAK,GAAG,CAACqD,SAAD,GAAaE,IAAI,CAACK,GAAL,CAAS,CAACR,OAAD,GAAWJ,YAApB,CAAzB;AACA,UAAIa,QAAQ,GAAG7D,KAAK,GAAGkD,SAAR,IAAqBlD,KAAK,GAAG,CAACkD,SAA7C;AACA,UAAI1D,OAAO,GAAGqE,QAAQ,GAAGJ,MAAM,GAAGzD,KAAZ,GAAoByD,MAA1C;AACA1H,MAAAA,MAAM,CAACyD,OAAD,CAAN;;AACA,UAAI,CAACqE,QAAL,EAAe;AACXnJ,QAAAA,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB;AACAxH,QAAAA,QAAQ;AACX;AACJ,KAXa,EAWX,IAXW,CAAd;AAYA,WAAO;AACHe,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOvC,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB,CAAP;AACH;AAHE,KAAP;AAKH,GAnCY,CAAb;AAoCH,CAxCD;;AAyCA,IAAII,WAAW,GAAG,aAAa3B,kBAAkB,CAACM,KAAD,EAAQ;AACrDf,EAAAA,IAAI,EAAExG,MAAM,CAACmG,IADwC;AAErD8B,EAAAA,YAAY,EAAE,sBAAUY,IAAV,EAAgB;AAC1B,WAAO,OAAOA,IAAP,KAAgB,UAAvB;AACH,GAJoD;AAKrDpB,EAAAA,QAAQ,EAAEzH,MAAM,CAACmG;AALoC,CAAR,CAAjD;;AAQA,IAAI2C,MAAM,GAAG,SAATA,MAAS,CAAUrH,KAAV,EAAiB;AAC1B,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAOkB,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,QACIG,QAAQ,GAAGT,EAAE,CAACS,QADlB;AAEA,QAAIwG,EAAE,GAAG/F,KAAK,CAACgG,QAAf;AAAA,QACIA,QAAQ,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EADrC;AAEA,QAAIE,EAAE,GAAGjG,KAAK,CAAC+E,IAAf;AAAA,QACIA,IAAI,GAAGkB,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EADjC;AAAA,QAEIC,EAAE,GAAGlG,KAAK,CAACgF,EAFf;AAAA,QAGIA,EAAE,GAAGkB,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAH/B;AAAA,QAIIE,EAAE,GAAGpG,KAAK,CAACsH,SAJf;AAAA,QAKIA,SAAS,GAAGlB,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EALtC;AAAA,QAMIE,EAAE,GAAGtG,KAAK,CAACuH,OANf;AAAA,QAOIA,OAAO,GAAGjB,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAPnC;AAAA,QAQIkB,EAAE,GAAGxH,KAAK,CAACyH,IARf;AAAA,QASIA,IAAI,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EATjC;AAAA,QAUIE,EAAE,GAAG1H,KAAK,CAAC2H,SAVf;AAAA,QAWIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAXvC;AAAA,QAYIE,EAAE,GAAG5H,KAAK,CAACuG,SAZf;AAAA,QAaIA,SAAS,GAAGqB,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAbvC;AAcA,QAAIC,eAAe,GAAG7B,QAAQ,GAAG,EAAEA,QAAQ,GAAG,IAAb,CAAH,GAAwB,GAAtD;AACA,QAAI8B,CAAC,GAAG,CAAR;AACA,QAAIzE,KAAK,GAAG2B,EAAE,GAAGD,IAAjB;AACA,QAAIgD,QAAQ,GAAGhD,IAAf;AACA,QAAIiD,YAAY,GAAGD,QAAnB;AACA,QAAIhB,OAAO,GAAGlJ,IAAI,CAACuB,MAAL,CAAY,UAAUN,EAAV,EAAc;AACpC,UAAIwE,SAAS,GAAGxE,EAAE,CAACuE,KAAnB;AACAyE,MAAAA,CAAC,IAAIxE,SAAL;AACA,UAAI2E,YAAY,GAAGV,OAAO,IAAI,IAAIX,IAAI,CAACsB,IAAL,CAAUZ,SAAS,GAAGG,IAAtB,CAAR,CAA1B;AACA,UAAIU,WAAW,GAAGvB,IAAI,CAACsB,IAAL,CAAUZ,SAAS,GAAGG,IAAtB,IAA8B,IAAhD;AACAO,MAAAA,YAAY,GAAGD,QAAf;;AACA,UAAIE,YAAY,GAAG,CAAnB,EAAsB;AAClB,YAAIG,QAAQ,GAAGxB,IAAI,CAACK,GAAL,CAAS,CAACgB,YAAD,GAAgBE,WAAhB,GAA8BL,CAAvC,CAAf;AACA,YAAIO,SAAS,GAAGF,WAAW,GAAGvB,IAAI,CAACsB,IAAL,CAAU,MAAMD,YAAY,GAAGA,YAA/B,CAA9B;AACAF,QAAAA,QAAQ,GAAG/C,EAAE,GAAGoD,QAAQ,IAAI,CAACP,eAAe,GAAGI,YAAY,GAAGE,WAAf,GAA6B9E,KAAhD,IAAyDgF,SAAzD,GAAqEzB,IAAI,CAAC0B,GAAL,CAASD,SAAS,GAAGP,CAArB,CAArE,GAA+FzE,KAAK,GAAGuD,IAAI,CAAC2B,GAAL,CAASF,SAAS,GAAGP,CAArB,CAA3G,CAAxB;AACH,OAJD,MAIO;AACH,YAAIM,QAAQ,GAAGxB,IAAI,CAACK,GAAL,CAAS,CAACkB,WAAD,GAAeL,CAAxB,CAAf;AACAC,QAAAA,QAAQ,GAAG/C,EAAE,GAAGoD,QAAQ,IAAI/E,KAAK,GAAG,CAACwE,eAAe,GAAGM,WAAW,GAAG9E,KAAjC,IAA0CyE,CAAtD,CAAxB;AACH;;AACD9B,MAAAA,QAAQ,GAAG7I,iBAAiB,CAAC4K,QAAQ,GAAGC,YAAZ,EAA0B1E,SAA1B,CAA5B;AACA,UAAIkF,wBAAwB,GAAG5B,IAAI,CAAC6B,GAAL,CAASzC,QAAT,KAAsB2B,SAArD;AACA,UAAIe,4BAA4B,GAAG9B,IAAI,CAAC6B,GAAL,CAASzD,EAAE,GAAG+C,QAAd,KAA2BxB,SAA9D;;AACA,UAAIiC,wBAAwB,IAAIE,4BAAhC,EAA8D;AAC1DX,QAAAA,QAAQ,GAAG/C,EAAX;AACA5F,QAAAA,MAAM,CAAC2I,QAAD,CAAN;AACAhK,QAAAA,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB;AACAxH,QAAAA,QAAQ;AACX,OALD,MAKO;AACHH,QAAAA,MAAM,CAAC2I,QAAD,CAAN;AACH;AACJ,KAzBa,EAyBX,IAzBW,CAAd;AA0BA,WAAO;AACHzH,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOvC,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB,CAAP;AACH;AAHE,KAAP;AAKH,GAvDY,CAAb;AAwDH,CA5DD;;AA6DA,IAAI4B,YAAY,GAAG,aAAanD,kBAAkB,CAAC6B,MAAD,EAAS;AACvDtC,EAAAA,IAAI,EAAExG,MAAM,CAACmG,IAD0C;AAEvDM,EAAAA,EAAE,EAAEzG,MAAM,CAACmG,IAF4C;AAGvD4C,EAAAA,SAAS,EAAE/I,MAAM,CAACmG,IAHqC;AAIvD6C,EAAAA,OAAO,EAAEhJ,MAAM,CAACmG,IAJuC;AAKvD+C,EAAAA,IAAI,EAAElJ,MAAM,CAACmG,IAL0C;AAMvDsB,EAAAA,QAAQ,EAAEzH,MAAM,CAACmG;AANsC,CAAT,CAAlD;;AASA,IAAIkE,OAAO,GAAG,SAAVA,OAAU,CAAU9J,EAAV,EAAc;AACxB,MAAIiH,EAAE,GAAGjH,EAAE,CAACiG,IAAZ;AAAA,MACIA,IAAI,GAAGgB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAD/B;AAAA,MAEIE,EAAE,GAAGnH,EAAE,CAACkH,QAFZ;AAAA,MAGIA,QAAQ,GAAGC,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAHnC;AAAA,MAII4C,GAAG,GAAG/J,EAAE,CAAC+J,GAJb;AAAA,MAKIC,GAAG,GAAGhK,EAAE,CAACgK,GALb;AAAA,MAMI5C,EAAE,GAAGpH,EAAE,CAACqH,KANZ;AAAA,MAOIA,KAAK,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAPlC;AAAA,MAQIE,EAAE,GAAGtH,EAAE,CAACuH,YARZ;AAAA,MASIA,YAAY,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EATzC;AAAA,MAUIE,EAAE,GAAGxH,EAAE,CAACiK,eAVZ;AAAA,MAWIA,eAAe,GAAGzC,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAX5C;AAAA,MAYIkB,EAAE,GAAG1I,EAAE,CAACkK,aAZZ;AAAA,MAaIA,aAAa,GAAGxB,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAbzC;AAAA,MAcIE,EAAE,GAAG5I,EAAE,CAACyH,SAdZ;AAAA,MAeIA,SAAS,GAAGmB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAfpC;AAAA,MAgBIlB,YAAY,GAAG1H,EAAE,CAAC0H,YAhBtB;AAiBA,SAAOtF,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,QACIG,SAAQ,GAAGT,EAAE,CAACS,QADlB;AAEA,QAAIqD,IAAI,GAAGmC,IAAX;AACA,QAAIlC,OAAO,GAAGkC,IAAd;AACA,QAAIkE,eAAJ;AACA,QAAIC,QAAQ,GAAG,KAAf;;AACA,QAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAU9J,CAAV,EAAa;AAC7B,aAAOwJ,GAAG,KAAKtI,SAAR,IAAqBlB,CAAC,IAAIwJ,GAAjC;AACH,KAFD;;AAGA,QAAIO,aAAa,GAAG,SAAhBA,aAAgB,CAAU/J,CAAV,EAAa;AAC7B,aAAOyJ,GAAG,KAAKvI,SAAR,IAAqBlB,CAAC,IAAIyJ,GAAjC;AACH,KAFD;;AAGA,QAAIO,aAAa,GAAG,SAAhBA,aAAgB,CAAUhK,CAAV,EAAa;AAC7B,aAAO8J,aAAa,CAAC9J,CAAD,CAAb,IAAoB+J,aAAa,CAAC/J,CAAD,CAAxC;AACH,KAFD;;AAGA,QAAIiK,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAUjK,CAAV,EAAakK,eAAb,EAA8B;AAC3D,aAAOJ,aAAa,CAAC9J,CAAD,CAAb,IAAoBkK,eAAe,GAAG,CAAtC,IAA2CH,aAAa,CAAC/J,CAAD,CAAb,IAAoBkK,eAAe,GAAG,CAAxF;AACH,KAFD;;AAGA,QAAIC,QAAQ,GAAG,SAAXA,QAAW,CAAUnK,CAAV,EAAa;AACxBD,MAAAA,MAAM,CAACC,CAAD,CAAN;AACAuD,MAAAA,IAAI,GAAGC,OAAP;AACAA,MAAAA,OAAO,GAAGxD,CAAV;AACA2G,MAAAA,QAAQ,GAAG7I,iBAAiB,CAAC0F,OAAO,GAAGD,IAAX,EAAiB9E,YAAY,GAAGuF,KAAhC,CAA5B;;AACA,UAAI4F,eAAe,IAAI,CAACC,QAApB,IAAgCI,0BAA0B,CAACjK,CAAD,EAAI2G,QAAJ,CAA9D,EAA6E;AACzEyD,QAAAA,WAAW,CAAC;AAAE1E,UAAAA,IAAI,EAAE1F,CAAR;AAAW2G,UAAAA,QAAQ,EAAEA;AAArB,SAAD,CAAX;AACH;AACJ,KARD;;AASA,QAAI0D,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,SAAV,EAAqBC,IAArB,EAA2B;AAC5CX,MAAAA,eAAe,IAAIA,eAAe,CAAC3I,IAAhB,EAAnB;AACA2I,MAAAA,eAAe,GAAGU,SAAS,CAACxJ,KAAV,CAAgB;AAC9Bf,QAAAA,MAAM,EAAEoK,QADsB;AAE9BjK,QAAAA,QAAQ,EAAE,oBAAY;AAClB,cAAIqK,IAAJ,EAAU;AACNA,YAAAA,IAAI;AACJ;AACH;;AACDrK,UAAAA,SAAQ;AACX;AAR6B,OAAhB,CAAlB;AAUH,KAZD;;AAaA,QAAIkK,WAAW,GAAG,SAAdA,WAAc,CAAUzJ,KAAV,EAAiB;AAC/BkJ,MAAAA,QAAQ,GAAG,IAAX;AACAQ,MAAAA,cAAc,CAACf,YAAY,CAAC3L,QAAQ,CAAC,EAAD,EAAKgD,KAAL,EAAY;AAAEgF,QAAAA,EAAE,EAAEmE,aAAa,CAACnJ,KAAK,CAAC+E,IAAP,CAAb,GAA4B8D,GAA5B,GAAkCC,GAAxC;AAA6CxB,QAAAA,SAAS,EAAEyB,eAAxD;AAAyExB,QAAAA,OAAO,EAAEyB,aAAlF;AAAiGzC,QAAAA,SAAS,EAAEA;AAA5G,OAAZ,CAAT,CAAb,CAAd;AACH,KAHD;;AAIA,QAAI8C,aAAa,CAACtE,IAAD,CAAjB,EAAyB;AACrB0E,MAAAA,WAAW,CAAC;AAAE1E,QAAAA,IAAI,EAAEA,IAAR;AAAciB,QAAAA,QAAQ,EAAEA;AAAxB,OAAD,CAAX;AACH,KAFD,MAEO,IAAIA,QAAQ,KAAK,CAAjB,EAAoB;AACvB,UAAI2D,SAAS,GAAGxC,WAAW,CAAC;AACxBpC,QAAAA,IAAI,EAAEA,IADkB;AAExBiB,QAAAA,QAAQ,EAAEA,QAFc;AAGxBK,QAAAA,YAAY,EAAEA,YAHU;AAIxBF,QAAAA,KAAK,EAAEA,KAJiB;AAKxBI,QAAAA,SAAS,EAAE8C,aAAa,CAACtE,IAAD,CAAb,GAAsB,EAAtB,GAA2BwB,SALd;AAMxBC,QAAAA,YAAY,EAAEA;AANU,OAAD,CAA3B;AAQAkD,MAAAA,cAAc,CAACC,SAAD,EAAY,YAAY;AAClC,YAAIN,aAAa,CAACxG,OAAD,CAAjB,EAA4B;AACxB4G,UAAAA,WAAW,CAAC;AAAE1E,YAAAA,IAAI,EAAElC,OAAR;AAAiBmD,YAAAA,QAAQ,EAAEA;AAA3B,WAAD,CAAX;AACH,SAFD,MAEO;AACHzG,UAAAA,SAAQ;AACX;AACJ,OANa,CAAd;AAOH,KAhBM,MAgBA;AACHA,MAAAA,SAAQ;AACX;;AACD,WAAO;AACHe,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAO2I,eAAe,IAAIA,eAAe,CAAC3I,IAAhB,EAA1B;AACH;AAHE,KAAP;AAKH,GAvEY,CAAb;AAwEH,CA1FD;;AA2FA,IAAIyB,KAAK,GAAG,aAAayD,kBAAkB,CAACoD,OAAD,EAAU;AACjD7D,EAAAA,IAAI,EAAExG,MAAM,CAACmG,IADoC;AAEjDsB,EAAAA,QAAQ,EAAEzH,MAAM,CAACmG,IAFgC;AAGjDmE,EAAAA,GAAG,EAAEtK,MAAM,CAACmG,IAHqC;AAIjDoE,EAAAA,GAAG,EAAEvK,MAAM,CAACmG,IAJqC;AAKjD6C,EAAAA,OAAO,EAAEhJ,MAAM,CAACmG,IALiC;AAMjD4C,EAAAA,SAAS,EAAE/I,MAAM,CAACmG,IAN+B;AAOjD8B,EAAAA,YAAY,EAAE,sBAAUY,IAAV,EAAgB;AAC1B,WAAO,OAAOA,IAAP,KAAgB,UAAvB;AACH;AATgD,CAAV,CAA3C;;AAYA,IAAIyC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,SAAO3I,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AACA,QAAI0K,WAAW,GAAG,CAAlB;AACA,QAAI/C,OAAO,GAAGlJ,IAAI,CAACuB,MAAL,CAAY,UAAUN,EAAV,EAAc;AACpC,UAAI4D,SAAS,GAAG5D,EAAE,CAAC4D,SAAnB;AACA,UAAI,CAACoH,WAAL,EAAkBA,WAAW,GAAGpH,SAAd;AAClBtD,MAAAA,MAAM,CAACsD,SAAS,GAAGoH,WAAb,CAAN;AACH,KAJa,EAIX,IAJW,EAIL,IAJK,CAAd;AAKA,WAAO;AACHxJ,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOvC,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB,CAAP;AACH;AAHE,KAAP;AAKH,GAbY,CAAb;AAcH,CAfD;;AAiBA,IAAIgD,QAAQ,GAAG,SAAXA,QAAW,CAAUjL,EAAV,EAAc;AACzB,MAAIiH,EAAE,GAAGjH,EAAE,CAACiG,IAAZ;AAAA,MACIA,IAAI,GAAGgB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAD/B;AAAA,MAEIE,EAAE,GAAGnH,EAAE,CAACkG,EAFZ;AAAA,MAGIA,EAAE,GAAGiB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAH7B;AAAA,MAIIC,EAAE,GAAGpH,EAAE,CAACkL,IAJZ;AAAA,MAKIA,IAAI,GAAG9D,EAAE,KAAK,KAAK,CAAZ,GAAgBzH,MAAhB,GAAyByH,EALpC;AAAA,MAMIE,EAAE,GAAGtH,EAAE,CAACmL,WANZ;AAAA,MAOIA,WAAW,GAAG7D,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAP1C;;AAQA,MAAI6D,WAAJ,EAAiB;AACbD,IAAAA,IAAI,GAAGxL,oBAAoB,CAACwL,IAAD,CAA3B;AACH;;AACD,SAAO9I,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AACA,WAAO;AACH8K,MAAAA,IAAI,EAAE,cAAU1M,QAAV,EAAoB;AACtB,eAAO4B,MAAM,CAAC5B,QAAD,CAAb;AACH;AAHE,KAAP;AAKH,GAPY,CAAN,CAOJN,IAPI,CAOC8M,IAPD,EAOO,UAAU3K,CAAV,EAAa;AACvB,WAAO/B,GAAG,CAACyH,IAAD,EAAOC,EAAP,EAAW3F,CAAX,CAAV;AACH,GATM,CAAP;AAUH,CAtBD;;AAuBA,IAAI8K,cAAc,GAAG,aAAa3E,kBAAkB,CAACuE,QAAD,EAAW;AAC3DC,EAAAA,IAAI,EAAE,cAAU5C,IAAV,EAAgB;AAClB,WAAO,OAAOA,IAAP,KAAgB,UAAvB;AACH,GAH0D;AAI3DrC,EAAAA,IAAI,EAAExG,MAAM,CAACmG,IAJ8C;AAK3DM,EAAAA,EAAE,EAAEzG,MAAM,CAACmG;AALgD,CAAX,CAApD;AAQA,IAAI0F,aAAa,GAAG,aAAa7M,KAAK,CAAC,CAAD,EAAI,CAAJ,CAAtC;;AACA,IAAI8M,KAAK,GAAG,SAARA,KAAQ,CAAUrK,KAAV,EAAiB;AACzB,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAOkB,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,QACIG,QAAQ,GAAGT,EAAE,CAACS,QADlB;AAEA,QAAIwG,EAAE,GAAG/F,KAAK,CAACsK,QAAf;AAAA,QACIA,QAAQ,GAAGvE,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EADrC;AAAA,QAEIE,EAAE,GAAGjG,KAAK,CAACgK,IAFf;AAAA,QAGIA,IAAI,GAAG/D,EAAE,KAAK,KAAK,CAAZ,GAAgBvH,OAAhB,GAA0BuH,EAHrC;AAAA,QAIIC,EAAE,GAAGlG,KAAK,CAACuK,IAJf;AAAA,QAKIA,IAAI,GAAGrE,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAL/B;AAAA,QAMIE,EAAE,GAAGpG,KAAK,CAACwK,IANf;AAAA,QAOIA,IAAI,GAAGpE,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAP/B;AAAA,QAQIE,EAAE,GAAGtG,KAAK,CAACyK,IARf;AAAA,QASIA,IAAI,GAAGnE,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAT/B;AAAA,QAUIkB,EAAE,GAAGxH,KAAK,CAAC0K,WAVf;AAAA,QAWIA,WAAW,GAAGlD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAXtC;AAYA,QAAIE,EAAE,GAAG1H,KAAK,CAAC+E,IAAf;AAAA,QACIA,IAAI,GAAG2C,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAD/B;AAAA,QAEIE,EAAE,GAAG5H,KAAK,CAACgF,EAFf;AAAA,QAGIA,EAAE,GAAG4C,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAH7B;AAAA,QAII+C,EAAE,GAAG3K,KAAK,CAACyG,OAJf;AAAA,QAKIA,OAAO,GAAGkE,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EALlC;AAAA,QAMIC,EAAE,GAAG5K,KAAK,CAAC6K,SANf;AAAA,QAOIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAPpC;AAAA,QAQIE,EAAE,GAAG9K,KAAK,CAAC+K,SARf;AAAA,QASIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EATpC;AAAA,QAUIE,EAAE,GAAGhL,KAAK,CAACiL,SAVf;AAAA,QAWIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAXpC;AAYA,QAAIE,QAAQ,GAAGf,cAAc,CAAC;AAAEpF,MAAAA,IAAI,EAAEA,IAAR;AAAcC,MAAAA,EAAE,EAAEA,EAAlB;AAAsBgF,MAAAA,IAAI,EAAEA;AAA5B,KAAD,CAAd,CAAmD7J,KAAnD,CAAyDf,MAAzD,CAAf;AACA,QAAI+L,eAAe,GAAG,CAAtB;AACA,QAAIpE,OAAJ;AACA,QAAI5H,SAAQ,GAAG,KAAf;;AACA,QAAIiM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUnB,WAAV,EAAuB;AAC1C,UAAInL,EAAJ;;AACA,UAAImL,WAAW,KAAK,KAAK,CAAzB,EAA4B;AACxBA,QAAAA,WAAW,GAAG,KAAd;AACH;;AACDnL,MAAAA,EAAE,GAAG,CAACkG,EAAD,EAAKD,IAAL,CAAL,EAAiBA,IAAI,GAAGjG,EAAE,CAAC,CAAD,CAA1B,EAA+BkG,EAAE,GAAGlG,EAAE,CAAC,CAAD,CAAtC;AACAoM,MAAAA,QAAQ,GAAGf,cAAc,CAAC;AAAEpF,QAAAA,IAAI,EAAEA,IAAR;AAAcC,QAAAA,EAAE,EAAEA,EAAlB;AAAsBgF,QAAAA,IAAI,EAAEA,IAA5B;AAAkCC,QAAAA,WAAW,EAAEA;AAA/C,OAAD,CAAd,CAA6E9J,KAA7E,CAAmFf,MAAnF,CAAX;AACH,KAPD;;AAQA,QAAIiM,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAC9B,UAAIjL,UAAU,GAAGjB,SAAQ,IAAIsH,OAAO,GAAG6D,QAAQ,GAAGI,WAAlD;AACA,UAAI,CAACtK,UAAL,EAAiB,OAAO,KAAP;AACjB,UAAIA,UAAU,IAAI,CAACoK,IAAf,IAAuB,CAACD,IAAxB,IAAgC,CAACE,IAArC,EAA2C,OAAO,IAAP;AAC3C,UAAIa,QAAQ,GAAG7E,OAAO,GAAG6D,QAAzB;AACA7D,MAAAA,OAAO,GAAG6E,QAAQ,GAAGZ,WAArB;;AACA,UAAIF,IAAI,IAAIS,SAAS,GAAGT,IAAxB,EAA8B;AAC1BS,QAAAA,SAAS;AACT,eAAO,KAAP;AACH,OAHD,MAGO,IAAIV,IAAI,IAAIM,SAAS,GAAGN,IAAxB,EAA8B;AACjCM,QAAAA,SAAS;AACTO,QAAAA,gBAAgB;AAChB,eAAO,KAAP;AACH,OAJM,MAIA,IAAIX,IAAI,IAAIM,SAAS,GAAGN,IAAxB,EAA8B;AACjCM,QAAAA,SAAS;AACTK,QAAAA,gBAAgB,CAACL,SAAS,GAAG,CAAZ,KAAkB,CAAnB,CAAhB;AACA,eAAO,KAAP;AACH;;AACD,aAAO,IAAP;AACH,KAnBD;;AAoBA,QAAIQ,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1BJ,MAAAA,eAAe,GAAGf,aAAa,CAAC5M,QAAQ,CAAC,CAAD,EAAI8M,QAAJ,EAAc7D,OAAd,CAAT,CAA/B;AACAyE,MAAAA,QAAQ,CAAChB,IAAT,CAAciB,eAAd;AACH,KAHD;;AAIA,QAAIK,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzBrM,MAAAA,SAAQ,GAAG,IAAX;AACA4H,MAAAA,OAAO,GAAGlJ,IAAI,CAACuB,MAAL,CAAY,UAAUN,EAAV,EAAc;AAChC,YAAIuE,KAAK,GAAGvE,EAAE,CAACuE,KAAf;AACAoD,QAAAA,OAAO,IAAIpD,KAAX;AACAkI,QAAAA,WAAW;;AACX,YAAIF,eAAe,EAAnB,EAAuB;AACnBtN,UAAAA,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB;AACAxH,UAAAA,QAAQ,IAAI1B,IAAI,CAACuB,MAAL,CAAYG,QAAZ,EAAsB,KAAtB,EAA6B,IAA7B,CAAZ;AACH;AACJ,OARS,EAQP,IARO,CAAV;AASH,KAXD;;AAYA,QAAIkM,SAAS,GAAG,SAAZA,SAAY,GAAY;AACxBtM,MAAAA,SAAQ,GAAG,KAAX;AACA,UAAI4H,OAAJ,EAAahJ,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB;AAChB,KAHD;;AAIAyE,IAAAA,UAAU;AACV,WAAO;AACHrM,MAAAA,QAAQ,EAAE,oBAAY;AAClB,eAAOA,SAAP;AACH,OAHE;AAIHuM,MAAAA,UAAU,EAAE,sBAAY;AACpB,eAAOnO,KAAK,CAAC,CAAD,EAAI+M,QAAJ,EAAc7D,OAAd,CAAZ;AACH,OANE;AAOHkF,MAAAA,WAAW,EAAE,uBAAY;AACrB,eAAOR,eAAP;AACH,OATE;AAUH7K,MAAAA,IAAI,EAAE,gBAAY;AACdmL,QAAAA,SAAS;AACZ,OAZE;AAaHG,MAAAA,KAAK,EAAE,iBAAY;AACfH,QAAAA,SAAS;AACT,eAAO,IAAP;AACH,OAhBE;AAiBHI,MAAAA,MAAM,EAAE,kBAAY;AAChB,YAAI,CAAC1M,SAAL,EAAeqM,UAAU;AACzB,eAAO,IAAP;AACH,OApBE;AAqBHtB,MAAAA,IAAI,EAAE,cAAU4B,WAAV,EAAuB;AACzBrF,QAAAA,OAAO,GAAGnJ,GAAG,CAAC,CAAD,EAAIgN,QAAJ,EAAcwB,WAAd,CAAb;AACAjO,QAAAA,IAAI,CAACuB,MAAL,CAAYmM,WAAZ,EAAyB,KAAzB,EAAgC,IAAhC;AACA,eAAO,IAAP;AACH,OAzBE;AA0BHQ,MAAAA,OAAO,EAAE,mBAAY;AACjBX,QAAAA,gBAAgB;AAChB,eAAO,IAAP;AACH;AA7BE,KAAP;AA+BH,GA/GY,CAAb;AAgHH,CApHD;;AAsHA,IAAIY,eAAe,GAAG,aAAazO,KAAK,CAAC,CAAD,EAAI,CAAJ,CAAxC;;AACA,IAAI0O,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AAC3C,SAAOD,MAAM,CAACE,GAAP,CAAW,YAAY;AAC1B,WAAOD,MAAM,IAAIzN,OAAjB;AACH,GAFM,EAEJuD,MAFI,CAEG,CAFH,EAEMiK,MAAM,CAACxM,MAAP,GAAgB,CAFtB,CAAP;AAGH,CAJD;;AAKA,IAAI2M,cAAc,GAAG,SAAjBA,cAAiB,CAAUH,MAAV,EAAkB;AACnC,MAAII,SAAS,GAAGJ,MAAM,CAACxM,MAAvB;AACA,SAAOwM,MAAM,CAACE,GAAP,CAAW,UAAUtJ,KAAV,EAAiBnB,CAAjB,EAAoB;AAClC,WAAOA,CAAC,KAAK,CAAN,GAAUA,CAAC,IAAI2K,SAAS,GAAG,CAAhB,CAAX,GAAgC,CAAvC;AACH,GAFM,CAAP;AAGH,CALD;;AAMA,IAAIC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUC,KAAV,EAAiBC,SAAjB,EAA4BrN,MAA5B,EAAoC;AAC3D,MAAIsN,WAAW,GAAGF,KAAK,CAAC9M,MAAxB;AACA,MAAIiN,eAAe,GAAGD,WAAW,GAAG,CAApC;AACA,MAAIE,kBAAkB,GAAGD,eAAe,GAAG,CAA3C;AACA,MAAIE,IAAI,GAAGJ,SAAS,CAACL,GAAV,CAAc,UAAUU,KAAV,EAAiB;AACtC,WAAOA,KAAK,CAAC3M,KAAN,CAAYf,MAAZ,CAAP;AACH,GAFU,CAAX;AAGA,SAAO,UAAUC,CAAV,EAAa;AAChB,QAAIA,CAAC,IAAImN,KAAK,CAAC,CAAD,CAAd,EAAmB;AACfK,MAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQ3C,IAAR,CAAa,CAAb;AACH;;AACD,QAAI7K,CAAC,IAAImN,KAAK,CAACG,eAAD,CAAd,EAAiC;AAC7BE,MAAAA,IAAI,CAACD,kBAAD,CAAJ,CAAyB1C,IAAzB,CAA8B,CAA9B;AACH;;AACD,QAAIvI,CAAC,GAAG,CAAR;;AACA,WAAOA,CAAC,GAAG+K,WAAX,EAAwB/K,CAAC,EAAzB,EAA6B;AACzB,UAAI6K,KAAK,CAAC7K,CAAD,CAAL,GAAWtC,CAAX,IAAgBsC,CAAC,KAAKgL,eAA1B,EAA2C;AAC9C;;AACD,QAAII,eAAe,GAAGvP,QAAQ,CAACgP,KAAK,CAAC7K,CAAC,GAAG,CAAL,CAAN,EAAe6K,KAAK,CAAC7K,CAAD,CAApB,EAAyBtC,CAAzB,CAA9B;AACAwN,IAAAA,IAAI,CAAClL,CAAC,GAAG,CAAL,CAAJ,CAAYuI,IAAZ,CAAiB8B,eAAe,CAACe,eAAD,CAAhC;AACH,GAbD;AAcH,CArBD;;AAsBA,IAAIC,SAAS,GAAG,SAAZA,SAAY,CAAUlO,EAAV,EAAc;AAC1B,MAAImO,OAAO,GAAGnO,EAAE,CAACmO,OAAjB;AAAA,MACIlH,EAAE,GAAGjH,EAAE,CAACkL,IADZ;AAAA,MAEIA,IAAI,GAAGjE,EAAE,KAAK,KAAK,CAAZ,GAAgBtH,MAAhB,GAAyBsH,EAFpC;AAAA,MAGImH,KAAK,GAAGpO,EAAE,CAACoO,KAHf;AAAA,MAIIhB,MAAM,GAAGpN,EAAE,CAACoN,MAJhB;AAAA,MAKIiB,UAAU,GAAGpQ,MAAM,CAAC+B,EAAD,EAAK,CAAC,SAAD,EAAY,MAAZ,EAAoB,OAApB,EAA6B,QAA7B,CAAL,CALvB;;AAMAmO,EAAAA,OAAO,GAAGG,KAAK,CAACC,OAAN,CAAcJ,OAAd,IAAyBA,OAAzB,GAAmChB,cAAc,CAACC,MAAD,EAASe,OAAT,CAA3D;AACAC,EAAAA,KAAK,GAAGA,KAAK,IAAIb,cAAc,CAACH,MAAD,CAA/B;AACA,MAAIO,SAAS,GAAGQ,OAAO,CAACb,GAAR,CAAY,UAAUD,MAAV,EAAkBxK,CAAlB,EAAqB;AAC7C,WAAOwI,cAAc,CAAC;AAClBpF,MAAAA,IAAI,EAAEmH,MAAM,CAACvK,CAAD,CADM;AAElBqD,MAAAA,EAAE,EAAEkH,MAAM,CAACvK,CAAC,GAAG,CAAL,CAFQ;AAGlBqI,MAAAA,IAAI,EAAEmC;AAHY,KAAD,CAArB;AAKH,GANe,CAAhB;AAOA,SAAO9B,KAAK,CAACrN,QAAQ,CAAC,EAAD,EAAKmQ,UAAL,EAAiB;AAAEnD,IAAAA,IAAI,EAAEA;AAAR,GAAjB,CAAT,CAAL,CAAgDrJ,eAAhD,CAAgE,UAAUvB,MAAV,EAAkB;AACrF,WAAOmN,oBAAoB,CAACW,KAAD,EAAQT,SAAR,EAAmBrN,MAAnB,CAA3B;AACH,GAFM,CAAP;AAGH,CAnBD;;AAqBA,IAAIkO,OAAO,GAAG,SAAVA,OAAU,CAAUtN,KAAV,EAAiB;AAC3B,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAOkB,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIS,QAAQ,GAAGT,EAAE,CAACS,QAAlB;AAAA,QACIH,MAAM,GAAGN,EAAE,CAACM,MADhB;AAEA,QAAI2G,EAAE,GAAG/F,KAAK,CAACuN,YAAf;AAAA,QACIA,YAAY,GAAGxH,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EADvC;AAAA,QAEIE,EAAE,GAAGjG,KAAK,CAACwN,QAFf;AAAA,QAGIA,QAAQ,GAAGvH,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAHnC;AAAA,QAIIC,EAAE,GAAGlG,KAAK,CAACgG,QAJf;AAAA,QAKIA,QAAQ,GAAGE,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EALnC;AAAA,QAMIuH,cAAc,GAAGzN,KAAK,CAACyN,cAN3B;AAAA,QAOIzI,EAAE,GAAGhF,KAAK,CAACgF,EAPf;AAQA,QAAIoB,EAAE,GAAGpG,KAAK,CAAC2H,SAAf;AAAA,QACIA,SAAS,GAAGvB,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EADxC;AAAA,QAEIE,EAAE,GAAGtG,KAAK,CAAC+E,IAFf;AAAA,QAGIA,IAAI,GAAGuB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAH/B;AAIA,QAAIzD,OAAO,GAAGkC,IAAd;AACA,QAAIgC,OAAO,GAAGlJ,IAAI,CAACuB,MAAL,CAAY,UAAUN,EAAV,EAAc;AACpC,UAAIuE,KAAK,GAAGvE,EAAE,CAACuE,KAAf;AACA,UAAIoD,OAAO,GAAGG,IAAI,CAACkC,GAAL,CAASzF,KAAT,EAAgB,EAAhB,CAAd;AACA,UAAIkK,YAAJ,EAAkBvH,QAAQ,IAAIvI,gBAAgB,CAAC8P,YAAD,EAAe9G,OAAf,CAA5B;AAClB,UAAI+G,QAAJ,EAAcxH,QAAQ,IAAIY,IAAI,CAAC8G,GAAL,CAAS,IAAIF,QAAb,EAAuB/G,OAAO,GAAG,GAAjC,CAAZ;;AACd,UAAIgH,cAAc,KAAKlN,SAAnB,IAAgCyE,EAAE,KAAKzE,SAA3C,EAAsD;AAClD,YAAIoN,gBAAgB,GAAG3I,EAAE,GAAGnC,OAA5B;AACAmD,QAAAA,QAAQ,IAAI2H,gBAAgB,GAAGlQ,gBAAgB,CAACgQ,cAAD,EAAiBhH,OAAjB,CAA/C;AACH;;AACD5D,MAAAA,OAAO,IAAIpF,gBAAgB,CAACuI,QAAD,EAAWS,OAAX,CAA3B;AACArH,MAAAA,MAAM,CAACyD,OAAD,CAAN;AACA,UAAIzC,UAAU,GAAGuH,SAAS,KAAK,KAAd,KAAwB,CAAC3B,QAAD,IAAaY,IAAI,CAAC6B,GAAL,CAASzC,QAAT,KAAsB2B,SAA3D,CAAjB;;AACA,UAAIvH,UAAJ,EAAgB;AACZrC,QAAAA,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB;AACAxH,QAAAA,QAAQ;AACX;AACJ,KAhBa,EAgBX,IAhBW,CAAd;AAiBA,WAAO;AACHqO,MAAAA,GAAG,EAAE,aAAUvO,CAAV,EAAa;AACdwD,QAAAA,OAAO,GAAGxD,CAAV;AACA,eAAO,IAAP;AACH,OAJE;AAKHwO,MAAAA,eAAe,EAAE,yBAAUxO,CAAV,EAAa;AAC1BkO,QAAAA,YAAY,GAAGlO,CAAf;AACA,eAAO,IAAP;AACH,OARE;AASHyO,MAAAA,WAAW,EAAE,qBAAUzO,CAAV,EAAa;AACtBmO,QAAAA,QAAQ,GAAGnO,CAAX;AACA,eAAO,IAAP;AACH,OAZE;AAaH0O,MAAAA,iBAAiB,EAAE,2BAAU1O,CAAV,EAAa;AAC5BoO,QAAAA,cAAc,GAAGpO,CAAjB;AACA,eAAO,IAAP;AACH,OAhBE;AAiBH2O,MAAAA,eAAe,EAAE,yBAAU3O,CAAV,EAAa;AAC1B2F,QAAAA,EAAE,GAAG3F,CAAL;AACA,eAAO,IAAP;AACH,OApBE;AAqBH4O,MAAAA,WAAW,EAAE,qBAAU5O,CAAV,EAAa;AACtB2G,QAAAA,QAAQ,GAAG3G,CAAX;AACA,eAAO,IAAP;AACH,OAxBE;AAyBHiB,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOvC,UAAU,CAACqB,MAAX,CAAkB2H,OAAlB,CAAP;AACH;AA3BE,KAAP;AA6BH,GA9DY,CAAb;AA+DH,CAnED;;AAoEA,IAAImH,aAAa,GAAG,aAAa1I,kBAAkB,CAAC8H,OAAD,EAAU;AACzDC,EAAAA,YAAY,EAAEhP,MAAM,CAACmG,IADoC;AAEzD8I,EAAAA,QAAQ,EAAEjP,MAAM,CAACmG,IAFwC;AAGzDsB,EAAAA,QAAQ,EAAEzH,MAAM,CAACmG,IAHwC;AAIzDK,EAAAA,IAAI,EAAExG,MAAM,CAACmG,IAJ4C;AAKzDM,EAAAA,EAAE,EAAEzG,MAAM,CAACmG,IAL8C;AAMzD+I,EAAAA,cAAc,EAAElP,MAAM,CAACmG;AANkC,CAAV,CAAnD;;AASA,IAAIyJ,KAAK,GAAG,SAARA,KAAQ,CAAUrP,EAAV,EAAc;AACtB,MAAIsP,QAAQ,GAAGtP,EAAE,CAACsP,QAAlB;AAAA,MACIC,QAAQ,GAAGvP,EAAE,CAACuP,QADlB;AAAA,MAEIC,SAAS,GAAGxP,EAAE,CAACwP,SAFnB;AAAA,MAGIC,MAAM,GAAGzP,EAAE,CAACyP,MAHhB;AAAA,MAIIC,OAAO,GAAG1P,EAAE,CAAC0P,OAJjB;AAAA,MAKIC,YAAY,GAAG3P,EAAE,CAAC2P,YALtB;AAMA,SAAO,UAAUC,OAAV,EAAmB;AACtB,WAAOxN,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,UAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,UACIG,UAAQ,GAAGT,EAAE,CAACS,QADlB;AAAA,UAEIC,KAAK,GAAGV,EAAE,CAACU,KAFf;AAGA,UAAImP,UAAU,GAAGP,QAAQ,CAACM,OAAD,CAAzB;AACA,UAAIE,MAAM,GAAGN,SAAS,EAAtB;;AACA,UAAIO,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3B,eAAOzP,MAAM,CAACwP,MAAD,CAAb;AACH,OAFD;;AAGA,UAAIE,mBAAmB,GAAG,CAA1B;AACA,UAAIjC,IAAI,GAAG4B,YAAY,CAACC,OAAD,EAAU,UAAUK,CAAV,EAAaC,IAAb,EAAmB;AAChD,YAAIC,YAAY,GAAG,KAAnB;AACA,eAAOF,CAAC,CAAC5O,KAAF,CAAQ;AACXZ,UAAAA,QAAQ,EAAE,oBAAY;AAClB,gBAAI,CAAC0P,YAAL,EAAmB;AACfA,cAAAA,YAAY,GAAG,IAAf;AACAH,cAAAA,mBAAmB;AACnB,kBAAIA,mBAAmB,KAAKH,UAA5B,EAAwC9Q,IAAI,CAACuB,MAAL,CAAYG,UAAZ;AAC3C;AACJ,WAPU;AAQXC,UAAAA,KAAK,EAAEA,KARI;AASXJ,UAAAA,MAAM,EAAE,gBAAUC,CAAV,EAAa;AACjBmP,YAAAA,OAAO,CAACI,MAAD,EAASI,IAAT,EAAe3P,CAAf,CAAP;AACAxB,YAAAA,IAAI,CAACuB,MAAL,CAAYyP,YAAZ,EAA0B,KAA1B,EAAiC,IAAjC;AACH;AAZU,SAAR,CAAP;AAcH,OAhBsB,CAAvB;AAiBA,aAAOjL,MAAM,CAACC,IAAP,CAAYwK,QAAQ,CAACxB,IAAD,CAApB,EAA4B3I,MAA5B,CAAmC,UAAUxD,GAAV,EAAewO,UAAf,EAA2B;AACjExO,QAAAA,GAAG,CAACwO,UAAD,CAAH,GAAkBX,MAAM,CAAC1B,IAAD,EAAOqC,UAAP,CAAxB;AACA,eAAOxO,GAAP;AACH,OAHM,EAGJ,EAHI,CAAP;AAIH,KA/BY,CAAb;AAgCH,GAjCD;AAkCH,CAzCD;;AA2CA,IAAIyO,SAAS,GAAG,aAAahB,KAAK,CAAC;AAC/BG,EAAAA,SAAS,EAAE,qBAAY;AACnB,WAAO,EAAP;AACH,GAH8B;AAI/BF,EAAAA,QAAQ,EAAE,kBAAUvB,IAAV,EAAgB;AACtB,WAAOjJ,MAAM,CAACC,IAAP,CAAYgJ,IAAZ,EAAkBnN,MAAzB;AACH,GAN8B;AAO/B2O,EAAAA,QAAQ,EAAE,kBAAUxB,IAAV,EAAgB;AACtB,WAAOA,IAAI,CAACjJ,MAAM,CAACC,IAAP,CAAYgJ,IAAZ,EAAkB,CAAlB,CAAD,CAAX;AACH,GAT8B;AAU/B0B,EAAAA,MAAM,EAAE,gBAAU1B,IAAV,EAAgBqC,UAAhB,EAA4B;AAChC,WAAO,YAAY;AACf,UAAIE,IAAI,GAAG,EAAX;;AACA,WAAK,IAAItO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1CsO,QAAAA,IAAI,CAACtO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,aAAO8C,MAAM,CAACC,IAAP,CAAYgJ,IAAZ,EAAkB3I,MAAlB,CAAyB,UAAU0K,MAAV,EAAkBS,OAAlB,EAA2B;AACvD,YAAIvQ,EAAJ;;AACA,YAAI+N,IAAI,CAACwC,OAAD,CAAJ,CAAcH,UAAd,CAAJ,EAA+B;AAC3BE,UAAAA,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAJ,CAAQC,OAAR,MAAqB9O,SAAhC,GAA4CqO,MAAM,CAACS,OAAD,CAAN,GAAkBxC,IAAI,CAACwC,OAAD,CAAJ,CAAcH,UAAd,EAA0BE,IAAI,CAAC,CAAD,CAAJ,CAAQC,OAAR,CAA1B,CAA9D,GAA4GT,MAAM,CAACS,OAAD,CAAN,GAAkB,CAACvQ,EAAE,GAAG+N,IAAI,CAACwC,OAAD,CAAV,EAAqBH,UAArB,EAAiCjO,KAAjC,CAAuCnC,EAAvC,EAA2CsQ,IAA3C,CAA9H;AACH;;AACD,eAAOR,MAAP;AACH,OANM,EAMJ,EANI,CAAP;AAOH,KAZD;AAaH,GAxB8B;AAyB/BJ,EAAAA,OAAO,EAAE,iBAAUI,MAAV,EAAkBI,IAAlB,EAAwB3P,CAAxB,EAA2B;AAChC,WAAOuP,MAAM,CAACI,IAAD,CAAN,GAAe3P,CAAtB;AACH,GA3B8B;AA4B/BoP,EAAAA,YAAY,EAAE,sBAAUC,OAAV,EAAmBY,OAAnB,EAA4B;AACtC,WAAO1L,MAAM,CAACC,IAAP,CAAY6K,OAAZ,EAAqBxK,MAArB,CAA4B,UAAU2I,IAAV,EAAgB7I,GAAhB,EAAqB;AACpD6I,MAAAA,IAAI,CAAC7I,GAAD,CAAJ,GAAYsL,OAAO,CAACZ,OAAO,CAAC1K,GAAD,CAAR,EAAeA,GAAf,CAAnB;AACA,aAAO6I,IAAP;AACH,KAHM,EAGJ,EAHI,CAAP;AAIH;AAjC8B,CAAD,CAAlC;AAoCA,IAAI0C,gBAAgB,GAAG,GAAvB;;AACA,IAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,YAAV,EAAwB;AACzC,MAAIC,gBAAgB,GAAG,EAAvB;AACA,MAAIC,OAAO,GAAGF,YAAY,CAACA,YAAY,CAAC/P,MAAb,GAAsB,CAAvB,CAA1B;AACA,MAAIkQ,WAAW,GAAG,OAAOD,OAAP,KAAmB,QAArC;AACA,MAAIE,YAAY,GAAGD,WAAW,GAAGD,OAAH,GAAa,CAA3C;AACA,MAAIG,QAAQ,GAAGF,WAAW,GAAGH,YAAY,CAACM,KAAb,CAAmB,CAAnB,EAAsB,CAAC,CAAvB,CAAH,GAA+BN,YAAzD;AACA,MAAIO,WAAW,GAAGF,QAAQ,CAACpQ,MAA3B;AACA,MAAIuQ,MAAM,GAAG,CAAb;AACAH,EAAAA,QAAQ,CAACnQ,OAAT,CAAiB,UAAUuQ,IAAV,EAAgBvO,CAAhB,EAAmB;AAChC+N,IAAAA,gBAAgB,CAAC7N,IAAjB,CAAsBqO,IAAtB;;AACA,QAAIvO,CAAC,KAAKqO,WAAW,GAAG,CAAxB,EAA2B;AACvB,UAAI1F,QAAQ,GAAG4F,IAAI,CAAC5F,QAAL,IAAiBiF,gBAAhC;AACAU,MAAAA,MAAM,IAAIJ,YAAV;AACAH,MAAAA,gBAAgB,CAAC7N,IAAjB,CAAsB,OAAOyI,QAAQ,GAAG2F,MAAlB,CAAtB;AACH;AACJ,GAPD;AAQA,SAAOP,gBAAP;AACH,CAjBD;;AAkBA,IAAIS,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAUV,YAAV,EAAwBW,WAAxB,EAAqC;AAChEhD,EAAAA,KAAK,CAACC,OAAN,CAAc+C,WAAd,IAA6BX,YAAY,CAAC5N,IAAb,CAAkBZ,KAAlB,CAAwBwO,YAAxB,EAAsCD,cAAc,CAACY,WAAD,CAApD,CAA7B,GAAkGX,YAAY,CAAC5N,IAAb,CAAkBuO,WAAlB,CAAlG;AACA,SAAOX,YAAP;AACH,CAHD;;AAIA,IAAIY,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUrQ,KAAV,EAAiBsQ,GAAjB,EAAsB3O,CAAtB,EAAyB;AAC7C,MAAI2I,QAAQ,GAAGtK,KAAK,CAACsK,QAArB;AAAA,MACI2C,OAAO,GAAGjN,KAAK,CAACiN,OADpB;AAAA,MAEIC,KAAK,GAAGlN,KAAK,CAACkN,KAFlB;AAAA,MAGIhB,MAAM,GAAGlM,KAAK,CAACkM,MAHnB;AAIA,MAAII,SAAS,GAAGJ,MAAM,CAACxM,MAAvB;AACA,MAAI6Q,UAAU,GAAGrD,KAAK,CAACZ,SAAS,GAAG,CAAb,CAAtB;AACA,MAAIkE,QAAQ,GAAGF,GAAG,CAACG,EAAJ,KAAW,CAAX,GAAe,CAAf,GAAmBH,GAAG,CAACG,EAAJ,GAASnG,QAA3C;AACA,MAAIoG,MAAM,GAAG,CAACJ,GAAG,CAACG,EAAJ,GAASH,GAAG,CAAChG,QAAd,IAA0BA,QAAvC;;AACA,MAAI3I,CAAC,KAAK,CAAV,EAAa;AACTuK,IAAAA,MAAM,CAACrK,IAAP,CAAYyO,GAAG,CAACvL,IAAhB;AACAmI,IAAAA,KAAK,CAACrL,IAAN,CAAW2O,QAAX;AACH,GAHD,MAGO;AACH,QAAID,UAAU,KAAKC,QAAnB,EAA6B;AACzB,UAAIF,GAAG,CAACvL,IAAJ,KAAaxE,SAAjB,EAA4B;AACxB2L,QAAAA,MAAM,CAACrK,IAAP,CAAYqK,MAAM,CAACI,SAAS,GAAG,CAAb,CAAlB;AACAY,QAAAA,KAAK,CAACrL,IAAN,CAAW2O,QAAX;AACAvD,QAAAA,OAAO,CAACpL,IAAR,CAAapD,MAAb;AACH;;AACD,UAAIsG,IAAI,GAAGuL,GAAG,CAACvL,IAAJ,KAAaxE,SAAb,GAAyB+P,GAAG,CAACvL,IAA7B,GAAoCmH,MAAM,CAACI,SAAS,GAAG,CAAb,CAArD;AACAJ,MAAAA,MAAM,CAACrK,IAAP,CAAYkD,IAAZ;AACAmI,MAAAA,KAAK,CAACrL,IAAN,CAAW2O,QAAX;AACAvD,MAAAA,OAAO,CAACpL,IAAR,CAAapD,MAAb;AACH,KAVD,MAUO,IAAI6R,GAAG,CAACvL,IAAJ,KAAaxE,SAAjB,EAA4B;AAC/B2L,MAAAA,MAAM,CAACrK,IAAP,CAAYyO,GAAG,CAACvL,IAAhB;AACAmI,MAAAA,KAAK,CAACrL,IAAN,CAAW2O,QAAX;AACAvD,MAAAA,OAAO,CAACpL,IAAR,CAAapD,MAAb;AACH;AACJ;;AACDyN,EAAAA,MAAM,CAACrK,IAAP,CAAYyO,GAAG,CAACtL,EAAhB;AACAkI,EAAAA,KAAK,CAACrL,IAAN,CAAW6O,MAAX;AACAzD,EAAAA,OAAO,CAACpL,IAAR,CAAayO,GAAG,CAACtG,IAAJ,IAAYrL,SAAzB;AACA,SAAOqB,KAAP;AACH,CAjCD;;AAkCA,IAAI2Q,QAAQ,GAAG,SAAXA,QAAW,CAAUlB,YAAV,EAAwB3Q,EAAxB,EAA4B;AACvC,MAAIiH,EAAE,GAAGjH,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA9B;AAAA,MACIwL,QAAQ,GAAGvE,EAAE,CAACuE,QADlB;AAAA,MAEI7D,OAAO,GAAGV,EAAE,CAACU,OAFjB;AAAA,MAGIuD,IAAI,GAAGjE,EAAE,CAACiE,IAHd;AAAA,MAIIQ,IAAI,GAAGzE,EAAE,CAACyE,IAJd;AAAA,MAKID,IAAI,GAAGxE,EAAE,CAACwE,IALd;AAAA,MAMIE,IAAI,GAAG1E,EAAE,CAAC0E,IANd;;AAOA,MAAIS,QAAQ,GAAG,CAAf;AACA,MAAI0F,kBAAkB,GAAG,CAAzB;AACA,MAAIlB,gBAAgB,GAAGD,YAAY,CAACvL,MAAb,CAAoBiM,wBAApB,EAA8C,EAA9C,CAAvB;AACA,MAAIU,aAAa,GAAG,EAApB;AACAnB,EAAAA,gBAAgB,CAAC/P,OAAjB,CAAyB,UAAUyQ,WAAV,EAAuB;AAC5C,QAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACjClF,MAAAA,QAAQ,IAAI1H,UAAU,CAAC4M,WAAD,CAAtB;AACH,KAFD,MAEO,IAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACxClF,MAAAA,QAAQ,GAAGkF,WAAX;AACH,KAFM,MAEA;AACH,UAAIE,GAAG,GAAGtT,QAAQ,CAAC,EAAD,EAAKoT,WAAL,EAAkB;AAAEK,QAAAA,EAAE,EAAEvF;AAAN,OAAlB,CAAlB;;AACAoF,MAAAA,GAAG,CAAChG,QAAJ,GAAegG,GAAG,CAAChG,QAAJ,KAAiB/J,SAAjB,GAA6BgP,gBAA7B,GAAgDe,GAAG,CAAChG,QAAnE;AACAuG,MAAAA,aAAa,CAAChP,IAAd,CAAmByO,GAAnB;AACApF,MAAAA,QAAQ,IAAIoF,GAAG,CAAChG,QAAhB;AACAsG,MAAAA,kBAAkB,GAAGhK,IAAI,CAACkC,GAAL,CAAS8H,kBAAT,EAA6BN,GAAG,CAACG,EAAJ,GAASH,GAAG,CAAChG,QAA1C,CAArB;AACH;AACJ,GAZD;AAaA,MAAIwG,MAAM,GAAG,EAAb;AACA,MAAIC,OAAO,GAAGF,aAAa,CAACnR,MAA5B;;AACA,OAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoP,OAApB,EAA6BpP,CAAC,EAA9B,EAAkC;AAC9B,QAAI2O,GAAG,GAAGO,aAAa,CAAClP,CAAD,CAAvB;AACA,QAAIqP,KAAK,GAAGV,GAAG,CAACU,KAAhB;;AACA,QAAIA,KAAK,KAAKzQ,SAAd,EAAyB;AACrB,YAAM,IAAI0Q,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,QAAI,CAACH,MAAM,CAACI,cAAP,CAAsBF,KAAtB,CAAL,EAAmCF,MAAM,CAACE,KAAD,CAAN,GAAgB,EAAhB;AACnCF,IAAAA,MAAM,CAACE,KAAD,CAAN,CAAcnP,IAAd,CAAmByO,GAAnB;AACH;;AACD,MAAIa,cAAc,GAAG,EAArB;;AACA,OAAK,IAAInN,GAAT,IAAgB8M,MAAhB,EAAwB;AACpB,QAAIA,MAAM,CAACI,cAAP,CAAsBlN,GAAtB,CAAJ,EAAgC;AAC5B,UAAIoN,aAAa,GAAGN,MAAM,CAAC9M,GAAD,CAAN,CAAYE,MAAZ,CAAmBmM,iBAAnB,EAAsC;AACtD/F,QAAAA,QAAQ,EAAEsG,kBAD4C;AAEtD3D,QAAAA,OAAO,EAAE,EAF6C;AAGtDC,QAAAA,KAAK,EAAE,EAH+C;AAItDhB,QAAAA,MAAM,EAAE;AAJ8C,OAAtC,CAApB;AAMAiF,MAAAA,cAAc,CAACnN,GAAD,CAAd,GAAsBgJ,SAAS,CAAChQ,QAAQ,CAAC,EAAD,EAAKoU,aAAL,EAAoB;AAAE9G,QAAAA,QAAQ,EAAEA,QAAQ,IAAIsG,kBAAxB;AAA4C5G,QAAAA,IAAI,EAAEA,IAAlD;AACxDvD,QAAAA,OAAO,EAAEA,OAD+C;AAExD+D,QAAAA,IAAI,EAAEA,IAFkD;AAGxDC,QAAAA,IAAI,EAAEA,IAHkD;AAIxDF,QAAAA,IAAI,EAAEA;AAJkD,OAApB,CAAT,CAA/B;AAKH;AACJ;;AACD,SAAO4E,SAAS,CAACgC,cAAD,CAAhB;AACH,CArDD;;AAuDA,IAAIE,MAAM,GAAG,SAATA,MAAS,CAAUC,OAAV,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoC;AAC7C,SAAOtQ,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AACA,QAAIqS,UAAU,GAAGF,MAAM,CAACG,KAAP,CAAa,GAAb,EAAkBtF,GAAlB,CAAsB,UAAUuF,SAAV,EAAqB;AACxDL,MAAAA,OAAO,CAACM,gBAAR,CAAyBD,SAAzB,EAAoCvS,MAApC,EAA4CoS,OAA5C;AACA,aAAOG,SAAP;AACH,KAHgB,CAAjB;AAIA,WAAO;AACHrR,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOmR,UAAU,CAAC9R,OAAX,CAAmB,UAAUgS,SAAV,EAAqB;AAC3C,iBAAOL,OAAO,CAACO,mBAAR,CAA4BF,SAA5B,EAAuCvS,MAAvC,EAA+CoS,OAA/C,CAAP;AACH,SAFM,CAAP;AAGH;AALE,KAAP;AAOH,GAbY,CAAb;AAcH,CAfD;;AAiBA,IAAIM,iBAAiB,GAAG,SAApBA,iBAAoB,GAAY;AAChC,SAAO;AACHC,IAAAA,OAAO,EAAE,CADN;AAEHC,IAAAA,OAAO,EAAE,CAFN;AAGHC,IAAAA,KAAK,EAAE,CAHJ;AAIHC,IAAAA,KAAK,EAAE,CAJJ;AAKHC,IAAAA,CAAC,EAAE,CALA;AAMHC,IAAAA,CAAC,EAAE;AANA,GAAP;AAQH,CATD;;AAUA,IAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,CAAV,EAAaC,KAAb,EAAoB;AACnC,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAGT,iBAAiB,EAAzB;AACH;;AACDS,EAAAA,KAAK,CAACR,OAAN,GAAgBQ,KAAK,CAACJ,CAAN,GAAUG,CAAC,CAACP,OAA5B;AACAQ,EAAAA,KAAK,CAACP,OAAN,GAAgBO,KAAK,CAACH,CAAN,GAAUE,CAAC,CAACN,OAA5B;AACAO,EAAAA,KAAK,CAACN,KAAN,GAAcK,CAAC,CAACL,KAAhB;AACAM,EAAAA,KAAK,CAACL,KAAN,GAAcI,CAAC,CAACJ,KAAhB;AACA,SAAOK,KAAP;AACH,CATD;;AAWA,IAAIC,MAAM,GAAG,CAAC,aAAaV,iBAAiB,EAA/B,CAAb;AACA,IAAIW,aAAa,GAAG,KAApB;;AACA,IAAI,OAAOC,QAAP,KAAoB,WAAxB,EAAqC;AACjC,MAAIC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAU7T,EAAV,EAAc;AACrC,QAAI8T,OAAO,GAAG9T,EAAE,CAAC8T,OAAjB;AACAH,IAAAA,aAAa,GAAG,IAAhB;AACA,QAAII,UAAU,GAAGD,OAAO,CAAClT,MAAzB;AACA8S,IAAAA,MAAM,CAAC9S,MAAP,GAAgB,CAAhB;;AACA,SAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkR,UAApB,EAAgClR,CAAC,EAAjC,EAAqC;AACjC,UAAImR,SAAS,GAAGF,OAAO,CAACjR,CAAD,CAAvB;AACA6Q,MAAAA,MAAM,CAAC3Q,IAAP,CAAYwQ,YAAY,CAACS,SAAD,CAAxB;AACH;AACJ,GATD;;AAUAzB,EAAAA,MAAM,CAACqB,QAAD,EAAW,sBAAX,EAAmC;AACrCK,IAAAA,OAAO,EAAE,IAD4B;AAErCC,IAAAA,OAAO,EAAE;AAF4B,GAAnC,CAAN,CAGG7S,KAHH,CAGSwS,oBAHT;AAIH;;AACD,IAAIM,UAAU,GAAG,SAAbA,UAAa,CAAUnU,EAAV,EAAc;AAC3B,MAAIiH,EAAE,GAAGjH,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA9B;AAAA,MACImH,EAAE,GAAGF,EAAE,CAACmN,cADZ;AAAA,MAEIA,cAAc,GAAGjN,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAF5C;AAAA,MAGIC,EAAE,GAAGH,EAAE,CAACoN,KAHZ;AAAA,MAIIA,KAAK,GAAGjN,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAJlC;AAAA,MAKIE,EAAE,GAAGL,EAAE,CAACqN,MALZ;AAAA,MAMIA,MAAM,GAAGhN,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EANnC;;AAOA,SAAOlF,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AACA,QAAIwP,MAAM,GAAG;AACTgE,MAAAA,OAAO,EAAEJ,MADA;AAETW,MAAAA,KAAK,EAAEA,KAFE;AAGTC,MAAAA,MAAM,EAAEA;AAHC,KAAb;AAKA,QAAIC,eAAe,GAAG,GAAtB;AACA,QAAIC,eAAe,GAAG,GAAtB;AACA,QAAIC,SAAS,GAAGf,MAAM,CAAC9S,MAAP,GAAgB,CAAhC;;AACA,QAAI6T,SAAJ,EAAe;AACX,UAAIC,UAAU,GAAGhB,MAAM,CAAC,CAAD,CAAvB;AAAA,UACIiB,WAAW,GAAGjB,MAAM,CAAC,CAAD,CADxB;AAEAa,MAAAA,eAAe,GAAG3V,QAAQ,CAAC8V,UAAD,EAAaC,WAAb,CAA1B;AACAH,MAAAA,eAAe,GAAG3V,KAAK,CAAC6V,UAAD,EAAaC,WAAb,CAAvB;AACH;;AACD,QAAIC,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1B,UAAIH,SAAJ,EAAe;AACX,YAAIC,UAAU,GAAGhB,MAAM,CAAC,CAAD,CAAvB;AAAA,YACIiB,WAAW,GAAGjB,MAAM,CAAC,CAAD,CADxB;AAEA,YAAImB,WAAW,GAAGjW,QAAQ,CAAC8V,UAAD,EAAaC,WAAb,CAA1B;AACA,YAAIG,WAAW,GAAGjW,KAAK,CAAC6V,UAAD,EAAaC,WAAb,CAAvB;AACA7E,QAAAA,MAAM,CAACuE,KAAP,GAAeA,KAAK,IAAIQ,WAAW,GAAGN,eAAlB,CAApB;AACAzE,QAAAA,MAAM,CAACwE,MAAP,GAAgBA,MAAM,IAAIQ,WAAW,GAAGN,eAAlB,CAAtB;AACH;;AACDlU,MAAAA,MAAM,CAACwP,MAAD,CAAN;AACH,KAVD;;AAWA,QAAIiF,MAAM,GAAG,SAATA,MAAS,CAAUvB,CAAV,EAAa;AACtB,UAAIY,cAAc,IAAIZ,CAAC,CAACM,OAAF,CAAUlT,MAAV,GAAmB,CAAzC,EAA4C4S,CAAC,CAACY,cAAF;AAC5CrV,MAAAA,IAAI,CAACuB,MAAL,CAAYsU,WAAZ;AACH,KAHD;;AAIA,QAAII,YAAY,GAAGzC,MAAM,CAACqB,QAAD,EAAW,WAAX,EAAwB;AAC7CK,MAAAA,OAAO,EAAE,CAACG;AADmC,KAAxB,CAAN,CAEhB/S,KAFgB,CAEV0T,MAFU,CAAnB;AAGA,QAAIpB,aAAJ,EAAmB5U,IAAI,CAACuB,MAAL,CAAYsU,WAAZ;AACnB,WAAO;AACHpT,MAAAA,IAAI,EAAE,gBAAY;AACdvC,QAAAA,UAAU,CAACqB,MAAX,CAAkBsU,WAAlB;AACAI,QAAAA,YAAY,CAACxT,IAAb;AACH;AAJE,KAAP;AAMH,GAzCY,CAAb;AA0CH,CAlDD;;AAmDA,IAAIyT,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AAC/B,SAAOtB,aAAP;AACH,CAFD;;AAIA,IAAIF,KAAK,GAAG,aAAaT,iBAAiB,EAA1C;AACA,IAAIkC,aAAa,GAAG,KAApB;;AACA,IAAI,OAAOtB,QAAP,KAAoB,WAAxB,EAAqC;AACjC,MAAIuB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAU3B,CAAV,EAAa;AACnC0B,IAAAA,aAAa,GAAG,IAAhB;AACA3B,IAAAA,YAAY,CAACC,CAAD,EAAIC,KAAJ,CAAZ;AACH,GAHD;;AAIAlB,EAAAA,MAAM,CAACqB,QAAD,EAAW,qBAAX,EAAkC,IAAlC,CAAN,CAA8CvS,KAA9C,CAAoD8T,mBAApD;AACH;;AACD,IAAIC,KAAK,GAAG,SAARA,KAAQ,CAAUpV,EAAV,EAAc;AACtB,MAAIiH,EAAE,GAAG,CAACjH,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAtB,EAA0BoU,cAAnC;AAAA,MACIA,cAAc,GAAGnN,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAD5C;AAEA,SAAO7E,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;;AACA,QAAIsU,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1B,aAAOtU,MAAM,CAACmT,KAAD,CAAb;AACH,KAFD;;AAGA,QAAIsB,MAAM,GAAG,SAATA,MAAS,CAAUvB,CAAV,EAAa;AACtB,UAAIY,cAAJ,EAAoBZ,CAAC,CAACY,cAAF;AACpBrV,MAAAA,IAAI,CAACuB,MAAL,CAAYsU,WAAZ;AACH,KAHD;;AAIA,QAAII,YAAY,GAAGzC,MAAM,CAACqB,QAAD,EAAW,WAAX,CAAN,CAA8BvS,KAA9B,CAAoC0T,MAApC,CAAnB;AACA,QAAIG,aAAJ,EAAmBnW,IAAI,CAACuB,MAAL,CAAYsU,WAAZ;AACnB,WAAO;AACHpT,MAAAA,IAAI,EAAE,gBAAY;AACdvC,QAAAA,UAAU,CAACqB,MAAX,CAAkBsU,WAAlB;AACAI,QAAAA,YAAY,CAACxT,IAAb;AACH;AAJE,KAAP;AAMH,GAjBY,CAAb;AAkBH,CArBD;;AAuBA,IAAI6T,aAAa,GAAG,SAAhBA,aAAgB,CAAUrV,EAAV,EAAc;AAC9B,MAAI0U,UAAU,GAAG1U,EAAE,CAAC,CAAD,CAAnB;AACA,SAAO0U,UAAP;AACH,CAHD;;AAIA,IAAIY,OAAO,GAAG,SAAVA,OAAU,CAAUpU,KAAV,EAAiB;AAC3B,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBA,IAAAA,KAAK,GAAG,EAAR;AACH;;AACD,SAAO+T,gBAAgB,KAAKd,UAAU,CAACjT,KAAD,CAAV,CAAkB9C,IAAlB,CAAuB,UAAU4B,EAAV,EAAc;AAC7D,QAAI8T,OAAO,GAAG9T,EAAE,CAAC8T,OAAjB;AACA,WAAOA,OAAP;AACH,GAH2B,EAGzBuB,aAHyB,CAAL,GAGHD,KAAK,CAAClU,KAAD,CAHzB;AAIH,CARD;;AASA,IAAIqU,OAAO,GAAG,SAAVA,OAAU,CAAUvV,EAAV,EAAc;AACxB,MAAIA,EAAE,KAAK,KAAK,CAAhB,EAAmB;AACfA,IAAAA,EAAE,GAAG,EAAL;AACH;;AACD,MAAIqT,CAAC,GAAGrT,EAAE,CAACqT,CAAX;AAAA,MACIC,CAAC,GAAGtT,EAAE,CAACsT,CADX;AAAA,MAEIpS,KAAK,GAAGjD,MAAM,CAAC+B,EAAD,EAAK,CAAC,GAAD,EAAM,GAAN,CAAL,CAFlB;;AAGA,MAAIqT,CAAC,KAAK5R,SAAN,IAAmB6R,CAAC,KAAK7R,SAA7B,EAAwC;AACpC,QAAI+T,cAAc,GAAG1W,WAAW,CAACuU,CAAC,IAAI,CAAN,CAAhC;AACA,QAAIoC,cAAc,GAAG3W,WAAW,CAACwU,CAAC,IAAI,CAAN,CAAhC;AACA,QAAIoC,OAAO,GAAG;AAAErC,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE;AAAX,KAAd;AACA,WAAOgC,OAAO,CAACpU,KAAD,CAAP,CAAe9C,IAAf,CAAoB,UAAUqV,KAAV,EAAiB;AACxCiC,MAAAA,OAAO,CAACrC,CAAR,GAAYmC,cAAc,CAAC/B,KAAK,CAACJ,CAAP,CAA1B;AACAqC,MAAAA,OAAO,CAACpC,CAAR,GAAYmC,cAAc,CAAChC,KAAK,CAACH,CAAP,CAA1B;AACA,aAAOoC,OAAP;AACH,KAJM,CAAP;AAKH,GATD,MASO;AACH,WAAOJ,OAAO,CAACpU,KAAD,CAAd;AACH;AACJ,CAnBD;;AAqBA,IAAIyU,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,MAAI/F,OAAO,GAAG,EAAd;;AACA,OAAK,IAAI5N,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1C4N,IAAAA,OAAO,CAAC5N,EAAD,CAAP,GAAcC,SAAS,CAACD,EAAD,CAAvB;AACH;;AACD,SAAOI,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,MAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,QACIG,UAAQ,GAAGT,EAAE,CAACS,QADlB;AAEA,QAAIoC,CAAC,GAAG,CAAR;AACA,QAAIkB,OAAJ;;AACA,QAAI6R,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1B7R,MAAAA,OAAO,GAAG6L,OAAO,CAAC/M,CAAD,CAAP,CAAWxB,KAAX,CAAiB;AACvBZ,QAAAA,QAAQ,EAAE,oBAAY;AAClBoC,UAAAA,CAAC;AACDA,UAAAA,CAAC,IAAI+M,OAAO,CAAChP,MAAb,GAAsBH,UAAQ,EAA9B,GAAmCmV,WAAW,EAA9C;AACH,SAJsB;AAKvBtV,QAAAA,MAAM,EAAEA;AALe,OAAjB,CAAV;AAOH,KARD;;AASAsV,IAAAA,WAAW;AACX,WAAO;AACHpU,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOuC,OAAO,IAAIA,OAAO,CAACvC,IAAR,EAAlB;AACH;AAHE,KAAP;AAKH,GApBY,CAAb;AAqBH,CA1BD;;AA4BA,IAAIqU,QAAQ,GAAG,aAAaxG,KAAK,CAAC;AAC9BG,EAAAA,SAAS,EAAE,qBAAY;AACnB,WAAO,EAAP;AACH,GAH6B;AAI9BF,EAAAA,QAAQ,EAAE,kBAAUvB,IAAV,EAAgB;AACtB,WAAOA,IAAI,CAACnN,MAAZ;AACH,GAN6B;AAO9B2O,EAAAA,QAAQ,EAAE,kBAAUxB,IAAV,EAAgB;AACtB,WAAOA,IAAI,CAAC,CAAD,CAAX;AACH,GAT6B;AAU9B0B,EAAAA,MAAM,EAAE,gBAAU1B,IAAV,EAAgBqC,UAAhB,EAA4B;AAChC,WAAO,YAAY;AACf,UAAIE,IAAI,GAAG,EAAX;;AACA,WAAK,IAAItO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1CsO,QAAAA,IAAI,CAACtO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,aAAO+L,IAAI,CAACT,GAAL,CAAS,UAAU7I,GAAV,EAAe5B,CAAf,EAAkB;AAC9B,YAAI4B,GAAG,CAAC2L,UAAD,CAAP,EAAqB;AACjB,iBAAO9B,KAAK,CAACC,OAAN,CAAc+B,IAAI,CAAC,CAAD,CAAlB,IAAyB7L,GAAG,CAAC2L,UAAD,CAAH,CAAgBE,IAAI,CAAC,CAAD,CAAJ,CAAQzN,CAAR,CAAhB,CAAzB,GAAuD4B,GAAG,CAAC2L,UAAD,CAAH,CAAgBjO,KAAhB,CAAsBsC,GAAtB,EAA2B6L,IAA3B,CAA9D;AACH;AACJ,OAJM,CAAP;AAKH,KAVD;AAWH,GAtB6B;AAuB9BZ,EAAAA,OAAO,EAAE,iBAAUI,MAAV,EAAkBI,IAAlB,EAAwB3P,CAAxB,EAA2B;AAChC,WAAOuP,MAAM,CAACI,IAAD,CAAN,GAAe3P,CAAtB;AACH,GAzB6B;AA0B9BoP,EAAAA,YAAY,EAAE,sBAAUC,OAAV,EAAmBY,OAAnB,EAA4B;AACtC,WAAOZ,OAAO,CAACtC,GAAR,CAAY,UAAUlL,MAAV,EAAkBS,CAAlB,EAAqB;AACpC,aAAO2N,OAAO,CAACpO,MAAD,EAASS,CAAT,CAAd;AACH,KAFM,CAAP;AAGH;AA9B6B,CAAD,CAAjC;;AAgCA,IAAIiT,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzB,MAAIlG,OAAO,GAAG,EAAd;;AACA,OAAK,IAAI5N,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1C4N,IAAAA,OAAO,CAAC5N,EAAD,CAAP,GAAcC,SAAS,CAACD,EAAD,CAAvB;AACH;;AACD,SAAO6T,QAAQ,CAACjG,OAAD,CAAf;AACH,CAND;;AAQA,IAAImG,SAAS,GAAG,SAAZA,SAAY,CAAU9F,CAAV,EAAa+F,CAAb,EAAgB;AAC5B,SAAO5T,MAAM,CAAC,UAAUnC,QAAV,EAAoB;AAC9B,QAAIgW,OAAO,GAAG,CAAd;AACA,QAAIC,OAAO,GAAGJ,UAAU,CAAC7F,CAAD,EAAI+F,CAAJ,CAAV,CAAiB3U,KAAjB,CAAuBnD,QAAQ,CAAC,EAAD,EAAK+B,QAAL,EAAe;AAAEK,MAAAA,MAAM,EAAE,gBAAUN,EAAV,EAAc;AAC5E,YAAImW,EAAE,GAAGnW,EAAE,CAAC,CAAD,CAAX;AAAA,YACIoW,EAAE,GAAGpW,EAAE,CAAC,CAAD,CADX;AAEAC,QAAAA,QAAQ,CAACK,MAAT,CAAgB9B,GAAG,CAAC2X,EAAD,EAAKC,EAAL,EAASH,OAAT,CAAnB;AACH;AAJuD,KAAf,CAA/B,CAAd;AAKA,WAAO;AACHI,MAAAA,UAAU,EAAE,oBAAU9V,CAAV,EAAa;AACrB,eAAO0V,OAAO,GAAG1V,CAAjB;AACH,OAHE;AAIHiB,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAO0U,OAAO,CAAC1U,IAAR,EAAP;AACH;AANE,KAAP;AAQH,GAfY,CAAb;AAgBH,CAjBD;;AAmBA,IAAI8U,KAAK,GAAG,SAARA,KAAQ,CAAUC,WAAV,EAAuB;AAC/B,SAAOnU,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIS,QAAQ,GAAGT,EAAE,CAACS,QAAlB;AACA,QAAI+V,OAAO,GAAGC,UAAU,CAAChW,QAAD,EAAW8V,WAAX,CAAxB;AACA,WAAO;AACH/U,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOkV,YAAY,CAACF,OAAD,CAAnB;AACH;AAHE,KAAP;AAKH,GARY,CAAb;AASH,CAVD;;AAYA,IAAIG,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,MAAI/G,OAAO,GAAG,EAAd;;AACA,OAAK,IAAI5N,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACrB,MAAhC,EAAwCoB,EAAE,EAA1C,EAA8C;AAC1C4N,IAAAA,OAAO,CAAC5N,EAAD,CAAP,GAAcC,SAAS,CAACD,EAAD,CAAvB;AACH;;AACD,SAAOI,MAAM,CAAC,UAAUnC,QAAV,EAAoB;AAC9B,QAAI8N,IAAI,GAAG6B,OAAO,CAACtC,GAAR,CAAY,UAAUsJ,UAAV,EAAsB;AACzC,aAAOA,UAAU,CAACvV,KAAX,CAAiBpB,QAAjB,CAAP;AACH,KAFU,CAAX;AAGA,WAAO;AACHuB,MAAAA,IAAI,EAAE,gBAAY;AACd,eAAOuM,IAAI,CAAClN,OAAL,CAAa,UAAU4D,GAAV,EAAe;AAC/B,iBAAOA,GAAG,CAACjD,IAAJ,EAAP;AACH,SAFM,CAAP;AAGH;AALE,KAAP;AAOH,GAXY,CAAb;AAYH,CAjBD;;AAmBA,IAAIqV,QAAQ,GAAG,SAAXA,QAAW,CAAUC,SAAV,EAAqBC,SAArB,EAAgC;AAC3C,SAAO3U,MAAM,CAAC,UAAUpC,EAAV,EAAc;AACxB,QAAIM,OAAM,GAAGN,EAAE,CAACM,MAAhB;AAAA,QACIG,QAAQ,GAAGT,EAAE,CAACS,QADlB;AAEA,QAAIuW,MAAJ;AACA,QAAIC,YAAY,GAAGH,SAAS,CAACzV,KAAV,CAAgB;AAC/Bf,MAAAA,MAAM,EAAE,kBAAY;AAChB,eAAO0W,MAAM,KAAKvV,SAAX,IAAwBnB,OAAM,CAAC0W,MAAD,CAArC;AACH,OAH8B;AAI/BvW,MAAAA,QAAQ,EAAEA;AAJqB,KAAhB,CAAnB;AAMA,QAAIyW,YAAY,GAAGH,SAAS,CAAC1V,KAAV,CAAgB;AAC/Bf,MAAAA,MAAM,EAAE,gBAAUC,CAAV,EAAa;AACjB,eAAOyW,MAAM,GAAGzW,CAAhB;AACH,OAH8B;AAI/BE,MAAAA,QAAQ,EAAEA;AAJqB,KAAhB,CAAnB;AAMA,WAAO;AACHe,MAAAA,IAAI,EAAE,gBAAY;AACdyV,QAAAA,YAAY,CAACzV,IAAb;AACA0V,QAAAA,YAAY,CAAC1V,IAAb;AACH;AAJE,KAAP;AAMH,GAtBY,CAAb;AAuBH,CAxBD;;AA0BA,IAAI2V,OAAO,GAAG,SAAVA,OAAU,CAAUvH,OAAV,EAAmBwH,QAAnB,EAA6B;AACvC,MAAIC,gBAAgB,GAAG,OAAOD,QAAP,KAAoB,QAA3C;AACA,MAAIE,gBAAgB,GAAG1H,OAAO,CAACtC,GAAR,CAAY,UAAU2C,CAAV,EAAapN,CAAb,EAAgB;AAC/C,QAAI0T,WAAW,GAAGc,gBAAgB,GAAGD,QAAQ,GAAGvU,CAAd,GAAkBuU,QAAQ,CAACvU,CAAD,CAA5D;AACA,WAAO8S,KAAK,CAACW,KAAK,CAACC,WAAD,CAAN,EAAqBtG,CAArB,CAAZ;AACH,GAHsB,CAAvB;AAIA,SAAO6F,UAAU,CAAC3T,KAAX,CAAiB,KAAK,CAAtB,EAAyBmV,gBAAzB,CAAP;AACH,CAPD;;AASA,IAAIC,MAAM,GAAG,SAATA,MAAS,GAAY;AACrB,SAAOzX,SAAS,CAAC,KAAD,EAAQ,0FAAR,CAAhB;AACH,CAFD;;AAIA,SAASmB,MAAT,EAAiBsC,aAAjB,EAAgCnB,MAAhC,EAAwCuT,KAAxC,EAA+CtF,SAA/C,EAA0D0F,SAA1D,EAAqE1N,WAAW,IAAIrB,KAApF,EAA2FsP,KAA3F,EAAkGvL,KAAK,IAAIyM,UAA3G,EAAuHvU,KAAK,IAAI6G,OAAhI,EAAyIoE,SAAzI,EAAoJqE,MAApJ,EAA4JoE,KAA5J,EAAmKvB,KAAnK,EAA0K9R,SAA1K,EAAqL6Q,UAArL,EAAiM2B,UAAU,IAAID,QAA/M,EAAyNzG,aAAa,IAAIZ,OAA1O,EAAmP+G,OAAO,IAAID,OAA9P,EAAuQuB,QAAvQ,EAAiRhN,YAAY,IAAItB,MAAjS,EAAyS4O,OAAzS,EAAkTI,MAAlT,EAA0T1F,QAA1T,EAAoUtG,KAApU,EAA2UvH,KAA3U","sourcesContent":["import { __rest, __assign, __extends } from 'tslib';\nimport { pipe, velocityPerSecond, mixComplex, mixColor, mix, clamp, progress, velocityPerFrame, distance, angle, applyOffset } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport { invariant } from 'hey-listen';\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var _this = this;\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function () {\n    function Action(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    Action.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Action.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    return Action;\n}();\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        _this.updateCurrent = function (v) {\n            return _this.current = v;\n        };\n        _this.getVelocityOfCurrent = function () {\n            return _this.getSingleVelocity(_this.current, _this.prev);\n        };\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var prev = from;\n        var current = from;\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var onUpdate = function (v) {\n            update(v);\n            prev = current;\n            current = v;\n            velocity = velocityPerSecond(current - prev, getFrameData().delta);\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, velocity)) {\n                startSpring({ from: v, velocity: velocity });\n            }\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: onUpdate,\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                if (isOutOfBounds(current)) {\n                    startSpring({ from: current, velocity: velocity });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress) {\n                return update(progress);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            var _a;\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            var overtime = elapsed - duration;\n            elapsed = overtime - repeatDelay;\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing) {\n    return values.map(function () {\n        return easing || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar styler = function () {\n    return invariant(false, 'styler has been removed from Popmotion in 9.0. Downgrade to 8.x or npm install stylefire');\n};\n\nexport { Action, ValueReaction, action, chain, composite, crossfade, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, styler, timeline, tween, value };\n"]},"metadata":{},"sourceType":"module"}